-- MySQL dump 10.13  Distrib 8.0.23, for Win64 (x86_64)
--
-- Host: localhost    Database: mydb
-- ------------------------------------------------------
-- Server version	8.0.23

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `frx_tools`
--

DROP TABLE IF EXISTS `frx_tools`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `frx_tools` (
  `id_frx_tools` int NOT NULL AUTO_INCREMENT,
  `name` varchar(245) NOT NULL,
  PRIMARY KEY (`id_frx_tools`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `frx_tools`
--

LOCK TABLES `frx_tools` WRITE;
/*!40000 ALTER TABLE `frx_tools` DISABLE KEYS */;
INSERT INTO `frx_tools` VALUES (1,'maxime'),(2,'eum'),(3,'magni'),(4,'temporibus'),(5,'reprehenderit'),(6,'enim'),(7,'laborum'),(8,'ratione'),(9,'sequi'),(10,'exercitationem');
/*!40000 ALTER TABLE `frx_tools` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `orders_frx_asc`
--

DROP TABLE IF EXISTS `orders_frx_asc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_frx_asc` (
  `id_orders_frx_asc` int NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `frx_tools_id_frx_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_frx_asc`),
  KEY `fk_orders_frx_asc_frx_tools1_idx` (`frx_tools_id_frx_tools`),
  KEY `fk_orders_frx_asc_orders_type1_idx` (`orders_type_id_orders_type`),
  KEY `fk_orders_frx_asc_user1_idx` (`user_id`),
  CONSTRAINT `fk_orders_frx_asc_frx_tools1` FOREIGN KEY (`frx_tools_id_frx_tools`) REFERENCES `frx_tools` (`id_frx_tools`),
  CONSTRAINT `fk_orders_frx_asc_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_frx_asc_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=105 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_frx_asc`
--

LOCK TABLES `orders_frx_asc` WRITE;
/*!40000 ALTER TABLE `orders_frx_asc` DISABLE KEYS */;
INSERT INTO `orders_frx_asc` (`id_orders_frx_asc`, `user_id`, `data`, `frx_tools_id_frx_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,78,'2012-01-12 08:04:16',8,1584944.65068,7,27206,4),(2,71,'2009-04-12 05:19:45',8,4950970.48180,1,29009,2),(3,93,'1979-08-23 14:12:49',8,15545.09584,5,18368,1),(4,45,'1994-12-13 00:46:04',10,837411.69700,3,3763,3),(5,92,'1997-05-01 14:31:52',7,51.32000,2,20038,3),(6,88,'1987-02-20 08:44:26',5,48529.50000,7,15425,3),(7,64,'1989-02-16 03:08:07',2,5.74206,4,26428,2),(8,5,'2011-04-01 09:53:12',9,0.00001,7,20439,4),(9,10,'1971-08-27 13:37:23',9,5.15615,6,19873,2),(10,77,'1984-02-23 03:33:57',10,16954830.71000,7,25526,4),(11,91,'2019-07-08 13:30:33',7,130018804.18000,4,5052,3),(12,58,'1996-07-28 22:31:12',4,690648265.55000,9,2324,1),(13,84,'1973-04-13 05:02:35',4,136.19800,2,36685,5),(14,85,'1998-06-26 18:43:30',8,4075159.00000,7,15205,5),(15,43,'1984-04-02 17:26:38',7,1525024.27273,3,30020,3),(16,92,'1985-02-24 06:53:34',6,7697.00000,7,13960,5),(17,46,'2002-06-20 20:49:25',2,26167.00000,8,19748,1),(18,68,'1981-09-04 09:40:20',3,20638910.00000,3,5114,5),(19,34,'2017-06-14 09:45:12',4,2938.86191,9,8335,5),(20,54,'1994-02-12 11:38:08',2,135.55286,8,14123,4),(21,18,'1970-04-26 07:37:26',1,53192101.00000,7,13877,3),(22,60,'1992-04-14 13:58:50',6,2188.90000,5,25855,5),(23,77,'1971-09-02 19:02:42',5,464.71693,1,19808,2),(24,66,'2001-05-21 12:00:37',3,392.52406,4,18863,5),(25,49,'1998-04-18 20:10:44',7,150098.20000,2,22684,4),(26,93,'1989-11-04 07:19:29',6,444573900.61127,6,4930,1),(27,84,'1985-10-04 04:13:32',1,35.31650,5,23573,2),(28,94,'1984-10-19 02:02:17',8,2553.26614,8,4722,4),(29,87,'1980-12-09 20:20:20',1,35.65803,8,18295,5),(30,75,'2015-12-20 18:39:21',6,1190281.28590,3,6228,1),(31,54,'1983-04-30 11:28:25',8,79934.00000,1,25314,1),(32,4,'1972-03-21 21:16:42',4,28874.42600,5,22370,4),(33,92,'2001-02-05 10:05:25',2,78.63339,6,15418,1),(34,13,'2000-02-24 18:12:05',8,0.00001,8,10866,2),(35,10,'1997-08-09 02:03:35',3,371.55482,7,35644,1),(36,74,'2013-11-16 09:35:51',2,420918848.72039,1,27641,4),(37,94,'2007-03-23 14:08:03',1,0.00001,4,20066,4),(38,31,'1973-07-20 18:46:11',10,86191904.79918,7,20963,2),(39,92,'1999-06-06 05:41:44',9,49784559.78523,3,7299,3),(40,87,'2014-07-30 23:45:01',6,1.00000,7,1066,1),(41,91,'1993-09-10 16:57:49',1,2383.40000,9,31501,5),(42,97,'1995-03-12 02:31:49',2,27457041.51435,2,28449,1),(43,62,'2004-08-21 21:20:13',1,54920533.50000,9,27897,2),(44,67,'1971-06-17 00:18:36',2,242.00000,4,17114,1),(45,99,'1999-04-02 06:24:30',3,39757323.99994,6,27968,2),(46,99,'1981-02-16 18:47:37',1,388335.48471,1,25264,3),(47,59,'1971-04-05 20:29:43',10,461986.04330,3,18838,3),(48,25,'1994-07-26 09:09:17',3,25618490.32890,8,1568,3),(49,64,'2017-08-24 02:48:46',2,330397828.77368,7,15593,2),(50,9,'2013-11-21 00:06:42',1,0.00001,1,22948,5),(51,13,'1996-11-06 13:36:33',10,16.21757,2,20450,5),(52,94,'1976-05-20 12:13:46',10,15899.00000,7,1317,1),(53,11,'1972-05-12 14:53:51',6,66739.55000,7,6157,1),(54,41,'2009-06-16 21:13:13',2,17341030.83816,8,22316,2),(55,48,'1976-09-07 20:27:43',2,480.00000,5,28813,3),(56,81,'1981-01-19 17:43:30',2,6.18775,8,20232,4),(57,33,'1972-07-04 21:31:31',8,2236546.22500,9,33472,3),(58,86,'1975-11-06 11:49:15',10,447143.92560,3,32819,5),(59,35,'2012-09-14 11:57:16',7,32117023.48029,2,32577,5),(60,66,'2012-06-01 14:29:52',8,3282.50000,3,3863,1),(61,53,'2006-11-10 04:30:11',9,432.38209,6,9938,5),(62,49,'2012-11-02 07:10:23',8,277439543.68949,1,16913,5),(63,59,'1974-02-28 03:20:50',9,4.68550,4,10148,2),(64,73,'1986-06-08 03:09:56',3,21980783.47200,8,21758,3),(65,5,'2014-12-06 06:39:27',8,0.00001,6,5230,4),(66,65,'1971-07-28 08:06:21',6,40.47520,8,12004,5),(67,26,'2005-12-25 21:21:01',9,0.00001,4,13431,4),(68,82,'2013-05-03 12:44:12',8,10568265.36238,3,27894,4),(69,64,'2005-12-30 18:06:29',1,381897.18551,4,13522,2),(70,63,'1992-07-16 23:07:23',8,1538641.65780,9,23140,5),(71,66,'1987-08-26 14:47:58',3,60.33669,8,15808,5),(72,63,'1994-05-06 08:36:27',8,21976.40000,9,18826,3),(73,50,'1997-09-12 07:50:12',4,4716.18111,7,18093,3),(74,90,'1983-12-23 06:33:14',1,18468.60000,8,14126,4),(75,49,'1983-01-31 16:31:23',2,6111744.34188,9,32235,3),(76,24,'1985-01-21 12:54:12',8,414.61830,2,17027,5),(77,15,'1989-10-09 00:01:59',1,17840.60525,2,1325,5),(78,81,'1985-02-26 04:28:38',9,2.10862,1,9299,4),(79,45,'1990-02-23 08:32:22',5,0.00001,9,6020,4),(80,72,'1975-02-14 16:56:59',1,518368.85071,8,21266,3),(81,69,'1978-07-04 17:09:44',8,0.00001,4,3686,4),(82,49,'1998-11-13 19:52:29',4,15774924.92200,9,38048,3),(83,6,'1991-10-02 12:15:30',9,721.94733,3,16139,4),(84,49,'1986-06-14 05:48:36',8,312.34770,2,14245,5),(85,19,'1971-06-06 23:20:03',3,324449.51577,9,20975,5),(86,63,'1977-12-04 13:17:29',5,845.41070,7,29195,4),(87,62,'1982-02-03 05:25:08',7,4.51355,9,33674,4),(88,49,'2005-02-24 04:24:11',5,0.00001,6,38242,3),(89,10,'2006-06-13 05:25:27',9,203.00000,3,31301,5),(90,78,'1977-05-02 23:37:36',6,598.75100,3,9495,1),(91,21,'1983-06-12 07:16:13',3,32125.51468,7,22215,4),(92,90,'2004-05-19 11:02:25',8,910774.37922,6,26752,1),(93,33,'2019-06-24 23:12:17',9,0.00001,8,24797,5),(94,9,'1991-03-18 07:54:52',3,3.48629,9,28039,4),(95,90,'2012-03-06 05:03:00',5,3538062.00000,9,24162,5),(96,82,'2010-10-18 01:10:22',1,6012.25849,8,15559,3),(97,48,'1975-07-07 01:56:13',8,2303.80000,9,27014,1),(98,15,'1982-12-31 03:19:30',2,49528.55043,3,13017,3),(99,64,'2018-05-27 14:00:45',3,0.19482,4,35599,2),(100,58,'2012-08-27 02:24:49',1,178934.73720,4,19279,5),(101,1,'1981-02-16 18:47:37',1,388335.48471,10000,27968,1),(102,1,'1981-02-16 18:47:37',1,0.19482,100000,1,1),(103,71,'1981-02-16 18:47:37',1,0.19482,100000,1,1);
/*!40000 ALTER TABLE `orders_frx_asc` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_frx_asc_BEFORE_INSERT` BEFORE INSERT ON `orders_frx_asc` FOR EACH ROW BEGIN
DECLARE quantity_ord INT;
DECLARE quantity_ord_asc INT;
DECLARE quantity_ord_bid INT;
DECLARE user_id_ord INT;
DECLARE frx_tools_id_frx_tools_ord INT;
SET frx_tools_id_frx_tools_ord = NEW.frx_tools_id_frx_tools;
SET user_id_ord = NEW.user_id;
SET quantity_ord = NEW.quantity;
SELECT 
	SUM(quantity) 
INTO 
	quantity_ord_asc
FROM 
	orders_frx_asc 
WHERE user_id_ord = user_id AND frx_tools_id_frx_tools_ord = frx_tools_id_frx_tools;
SELECT 
	SUM(quantity) 
INTO
	quantity_ord_bid
FROM 
	orders_frx_bid 
WHERE user_id_ord = user_id AND frx_tools_id_frx_tools_ord = frx_tools_id_frx_tools ;
IF (IFNULL(quantity_ord_bid, 0) - IFNULL(quantity_ord_asc, 0)) < quantity_ord THEN
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'you do nоt have enough to sell';
END IF;

END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_frx_asc_corp`
--

DROP TABLE IF EXISTS `orders_frx_asc_corp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_frx_asc_corp` (
  `id_orders_frx_asc_corp` int NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `frx_tools_id_frx_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_frx_asc_corp`),
  KEY `fk_orders_frx_asc_corp_user1_idx` (`user_id`),
  KEY `fk_orders_frx_asc_corp_orders_type1_idx` (`orders_type_id_orders_type`),
  KEY `fk_orders_frx_asc_corp_frx_tools1_idx` (`frx_tools_id_frx_tools`),
  CONSTRAINT `fk_orders_frx_asc_corp_frx_tools1` FOREIGN KEY (`frx_tools_id_frx_tools`) REFERENCES `frx_tools` (`id_frx_tools`),
  CONSTRAINT `fk_orders_frx_asc_corp_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_frx_asc_corp_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=109 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_frx_asc_corp`
--

LOCK TABLES `orders_frx_asc_corp` WRITE;
/*!40000 ALTER TABLE `orders_frx_asc_corp` DISABLE KEYS */;
INSERT INTO `orders_frx_asc_corp` (`id_orders_frx_asc_corp`, `user_id`, `data`, `frx_tools_id_frx_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,73,'1971-08-31 10:08:30',5,474274.98400,7,18047,3),(2,93,'2005-02-28 23:23:42',5,8.82986,7,5163,2),(3,40,'1983-04-18 12:28:46',10,9081736.77030,6,2379,3),(4,54,'2008-02-05 04:20:45',10,0.00001,8,6739,4),(5,94,'1975-02-05 14:01:49',9,0.90000,9,8854,4),(6,51,'2008-04-11 11:34:28',1,0.00001,5,29517,3),(7,23,'2014-06-30 04:31:03',2,63.74490,5,16366,2),(8,41,'1986-12-27 06:26:28',6,236.42140,1,21618,4),(9,72,'2019-02-14 07:46:12',10,0.00001,1,29040,4),(10,36,'1986-08-17 20:31:29',2,6.00833,3,2343,4),(11,90,'2001-12-06 03:00:31',9,0.01693,6,11980,1),(12,50,'1976-01-27 23:30:52',9,2.65850,3,31197,3),(13,72,'2013-11-04 03:37:50',3,241987.30000,9,12441,3),(14,26,'1997-03-28 10:57:02',8,59826242.20000,7,35590,3),(15,93,'1994-01-31 00:00:22',7,0.00001,4,7628,2),(16,68,'1974-06-29 08:43:24',2,642.45000,6,17466,2),(17,10,'2020-09-16 20:56:13',5,0.00001,7,35439,3),(18,45,'2013-09-30 21:42:34',9,4257.85800,6,36826,1),(19,8,'1979-03-10 23:51:41',6,29932725.98389,7,2087,1),(20,82,'2000-02-22 07:24:41',9,613547.11020,2,18751,2),(21,55,'2014-10-15 06:52:40',8,316252.78481,6,17003,1),(22,70,'1973-03-22 18:25:41',3,12.97653,4,20680,5),(23,27,'1970-12-28 08:44:55',10,71135.69110,4,38920,1),(24,78,'2006-12-20 00:36:53',3,608072736.80000,7,23640,5),(25,26,'1995-08-28 01:15:41',2,0.00001,2,11498,3),(26,60,'2007-06-23 23:16:29',9,663.40000,9,19674,4),(27,97,'1974-09-20 14:54:47',10,506982629.39666,5,14922,1),(28,52,'2014-10-23 03:43:32',4,47.09905,7,6324,5),(29,58,'2007-11-22 13:55:37',5,1.00000,8,33382,3),(30,62,'1970-06-11 14:30:56',3,17272.00000,3,24823,2),(31,83,'2013-12-22 14:27:48',9,5426281.39000,9,11307,1),(32,93,'1995-03-17 03:45:17',5,0.49600,6,13416,2),(33,85,'2012-10-24 09:35:34',8,4.48134,4,27608,2),(34,99,'2013-07-22 14:37:13',6,726982.59642,7,34763,4),(35,86,'1974-11-26 18:20:59',8,17796303.00000,8,27888,4),(36,41,'1971-07-08 11:39:58',4,126995223.84248,5,29118,4),(37,14,'1999-08-05 06:15:11',4,1361448.54300,4,18311,3),(38,27,'1983-06-15 15:23:00',9,506307.16172,5,16626,5),(39,21,'1991-06-05 23:19:23',5,0.00001,4,15598,2),(40,69,'1993-09-25 03:47:09',1,13928710.70000,8,26710,4),(41,4,'2006-12-26 19:53:47',9,392929.31449,6,11168,3),(42,16,'2007-08-10 16:17:43',9,1.26300,2,4992,5),(43,56,'2006-04-22 13:34:37',7,1827.86600,2,18281,4),(44,94,'2003-11-30 15:27:19',7,9028584.00350,2,2572,2),(45,56,'2009-03-18 01:34:40',6,2647959.00000,6,27829,1),(46,35,'2014-02-22 22:03:28',10,0.00001,4,10801,3),(47,97,'2016-09-12 22:49:51',1,4092380.41618,2,15158,4),(48,54,'2017-02-19 08:41:49',4,43975971.61700,8,23481,4),(49,48,'1985-12-29 22:09:56',6,2938.70340,3,25834,1),(50,87,'2006-08-10 14:13:17',3,277.36000,3,13006,1),(51,53,'1972-04-17 18:40:34',3,5.12000,5,22658,1),(52,99,'1975-03-27 09:39:37',5,1846.82244,9,32395,5),(53,95,'2010-10-18 10:20:45',10,474.50321,9,10668,3),(54,66,'2020-11-21 02:49:36',9,3045441.45707,9,21273,2),(55,91,'1997-02-18 04:54:46',5,23072094.70000,2,14384,4),(56,94,'1979-05-19 09:09:55',8,678621.49000,4,12332,4),(57,37,'2000-10-27 22:41:11',8,27674435.90000,5,6484,4),(58,16,'1988-02-23 11:02:34',3,182017.69700,6,36594,1),(59,82,'1986-07-09 10:03:55',8,0.00001,2,1104,3),(60,94,'2003-08-08 13:13:39',7,30474.49808,1,20178,4),(61,12,'1985-05-16 23:42:20',2,884338.00000,2,17823,1),(62,20,'2010-06-05 11:50:47',2,264329.30000,4,14200,3),(63,9,'1995-12-14 09:41:08',1,3051297.07770,4,1004,2),(64,66,'1990-06-26 03:35:38',8,7352969.72000,1,8276,2),(65,87,'1992-07-30 22:01:23',7,5443.57961,4,8317,4),(66,60,'1974-09-15 01:20:01',6,245843.25065,5,34514,3),(67,25,'1970-11-23 16:15:14',10,238806.09370,2,32195,2),(68,95,'1979-05-24 05:44:30',1,3020.00000,8,18574,3),(69,98,'2004-01-08 02:44:30',9,1883603.95300,2,36564,2),(70,53,'2017-03-10 05:43:39',9,10.93449,3,14174,5),(71,30,'1983-12-09 09:07:00',10,32.30000,3,13923,1),(72,31,'1998-08-11 02:27:01',2,54.60565,4,24972,2),(73,73,'1984-07-14 01:56:57',3,26930.20110,9,34181,2),(74,11,'1981-02-04 01:12:28',9,3411.90000,7,11020,1),(75,38,'1989-10-05 20:28:52',8,503162114.85916,5,7376,4),(76,11,'1970-08-08 23:51:39',4,3850866.00000,5,8146,2),(77,64,'2003-12-21 01:39:25',6,1.31611,5,31137,1),(78,92,'1988-08-20 17:50:05',6,0.00001,8,26683,2),(79,50,'2016-02-07 19:43:23',5,6.90478,2,33330,1),(80,84,'1983-04-25 17:35:10',1,34.50000,4,1673,5),(81,81,'1986-08-16 16:56:31',4,2.20000,8,30038,5),(82,93,'2017-12-23 09:09:54',7,25134431.55011,2,12210,1),(83,18,'2012-07-24 14:27:40',4,13814886.06400,4,9374,2),(84,50,'2015-07-25 00:44:45',5,65931.89265,9,14212,1),(85,55,'2016-09-24 09:02:32',9,0.00001,8,21318,5),(86,23,'1976-12-24 08:42:31',10,0.00001,9,25364,2),(87,48,'2013-05-04 02:00:29',6,304683.44536,8,14328,5),(88,66,'2012-10-22 21:56:10',6,39.61735,8,20618,2),(89,93,'1989-06-24 07:52:46',10,65669214.63010,7,34041,5),(90,9,'2000-11-06 15:00:39',9,0.90000,7,28755,5),(91,8,'1998-04-22 16:32:55',7,10.00000,5,34541,2),(92,2,'1994-07-25 23:51:40',6,50.00000,6,7873,5),(93,9,'1988-03-26 05:05:30',9,1.96000,5,19332,1),(94,38,'1999-07-08 21:42:46',3,182.09852,9,35879,4),(95,54,'2007-06-01 12:30:50',8,331863325.72000,6,35511,3),(96,45,'1982-06-21 08:04:11',10,579231.59592,6,24307,3),(97,70,'1977-08-10 01:59:07',5,24013.00000,6,23831,1),(98,53,'1999-12-24 15:04:46',2,0.00001,1,6311,3),(99,88,'2007-03-09 19:41:49',1,1.09801,9,37575,3),(100,74,'1970-04-11 03:01:57',2,8.16000,9,12370,2),(101,1,'1970-04-11 03:01:57',2,8.16000,1000,1,1),(102,2,'1970-04-11 03:01:57',4,39.61735,1000,2344,2),(103,55,'1970-04-11 03:01:57',5,39.61735,100,123456,3),(104,9,'1988-03-26 05:05:30',6,50.00000,100,654321,2),(105,99,'1975-03-27 09:39:37',5,1846.82244,100,789654,4),(106,98,'1970-04-11 03:01:57',9,8.16000,100,2333,4),(107,1,'1975-03-27 09:39:37',2,8.16000,15,789654,3),(108,87,'1975-03-27 09:39:37',3,8.16000,100,789654,2);
/*!40000 ALTER TABLE `orders_frx_asc_corp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_frx_asc_corp_BEFORE_INSERT` BEFORE INSERT ON `orders_frx_asc_corp` FOR EACH ROW BEGIN
DECLARE quantity_ord INT;
DECLARE quantity_ord_asc INT;
DECLARE quantity_ord_bid INT;
DECLARE user_id_ord INT;
DECLARE frx_tools_id_frx_tools_ord INT;
SET frx_tools_id_frx_tools_ord = NEW.frx_tools_id_frx_tools;
SET user_id_ord = NEW.user_id;
SET quantity_ord = NEW.quantity;
SELECT 
	SUM(quantity) 
INTO 
	quantity_ord_asc
FROM 
	orders_frx_asc_corp 
WHERE user_id_ord = user_id AND frx_tools_id_frx_tools_ord = frx_tools_id_frx_tools;
SELECT 
	SUM(quantity) 
INTO
	quantity_ord_bid
FROM 
	 orders_frx_bid_corp
WHERE user_id_ord = user_id AND frx_tools_id_frx_tools_ord = frx_tools_id_frx_tools;
IF (IFNULL(quantity_ord_bid, 0) - IFNULL(quantity_ord_asc, 0)) < quantity_ord THEN
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'you do nоt have enough to sell';
END IF;


END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_frx_bid`
--

DROP TABLE IF EXISTS `orders_frx_bid`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_frx_bid` (
  `id_orders_frx_bid` int unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `frx_tools_id_frx_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int unsigned NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_frx_bid`),
  KEY `fk_orders_frx_bid_frx_tools1_idx` (`frx_tools_id_frx_tools`),
  KEY `fk_orders_frx_bid_orders_type1_idx` (`orders_type_id_orders_type`),
  KEY `fk_orders_frx_bid_user1_idx` (`user_id`),
  CONSTRAINT `fk_orders_frx_bid_frx_tools1` FOREIGN KEY (`frx_tools_id_frx_tools`) REFERENCES `frx_tools` (`id_frx_tools`),
  CONSTRAINT `fk_orders_frx_bid_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_frx_bid_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=106 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_frx_bid`
--

LOCK TABLES `orders_frx_bid` WRITE;
/*!40000 ALTER TABLE `orders_frx_bid` DISABLE KEYS */;
INSERT INTO `orders_frx_bid` (`id_orders_frx_bid`, `user_id`, `data`, `frx_tools_id_frx_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,29,'1983-06-21 01:25:51',2,193814344.03295,7,12680,1),(2,49,'1998-10-12 01:00:40',1,3279104.84000,8,20795,3),(3,8,'2014-10-19 00:28:00',2,340275698.76551,5,7485,2),(4,90,'2009-08-27 16:03:36',10,5.94508,2,18960,3),(5,2,'2008-02-15 14:41:55',3,951732.43900,2,23388,5),(6,21,'2016-12-13 13:48:40',4,91697964.03605,9,9772,4),(7,16,'1998-01-07 15:53:30',10,8024364.00000,5,34268,2),(8,99,'1998-04-16 23:29:24',4,25442.05814,2,20919,1),(9,9,'1984-07-30 12:51:50',2,31957.33837,6,25921,5),(10,64,'2007-02-05 13:29:35',10,5287.23222,4,20492,3),(11,18,'2013-12-09 07:01:16',3,53504.08037,4,38170,3),(12,19,'1976-05-25 14:07:22',8,224.00900,1,34178,4),(13,75,'2009-10-18 15:01:08',9,2787.99473,1,6048,5),(14,97,'1980-06-29 04:17:13',8,4468816.20000,4,3677,4),(15,39,'2001-10-22 10:35:13',8,19.96206,5,26080,5),(16,20,'1981-08-29 05:33:05',10,52.37853,7,5062,2),(17,91,'2010-04-02 12:48:23',2,0.00001,4,36164,2),(18,30,'1975-03-05 21:44:16',1,1.85800,3,8156,4),(19,37,'2006-08-24 10:29:45',2,6115.00000,7,35541,5),(20,28,'2003-09-03 01:30:07',9,0.32271,3,13121,5),(21,71,'1997-10-27 06:22:01',10,106.42000,5,11642,1),(22,26,'2001-06-18 06:59:17',2,34.67693,4,3212,5),(23,88,'1986-05-18 19:55:18',10,19207.17665,2,35535,4),(24,70,'2015-12-09 11:27:40',9,0.00001,3,23028,2),(25,45,'1991-05-05 18:07:08',3,61439.62000,6,37495,1),(26,44,'1979-10-18 02:53:57',5,16813.00000,9,25483,1),(27,73,'2009-10-01 02:56:10',4,1819.97532,7,24056,1),(28,100,'1990-09-30 12:19:16',7,882325.00000,5,7147,2),(29,63,'1998-03-18 10:49:20',1,2.28714,6,33565,3),(30,46,'2018-09-07 06:45:12',3,1.03247,5,24146,2),(31,26,'1982-09-14 10:38:20',10,6.77000,1,14844,1),(32,33,'2000-09-15 00:11:49',3,0.00001,6,23671,2),(33,14,'1986-04-23 19:52:17',2,87.82200,7,36029,2),(34,77,'1993-01-16 15:11:34',9,515237.75260,4,8709,1),(35,13,'1972-02-07 04:49:03',3,0.20619,9,23532,2),(36,23,'1999-03-06 21:28:44',7,0.00001,9,34038,5),(37,28,'2004-10-09 22:17:21',5,498775.13006,1,4988,1),(38,43,'1991-03-12 12:04:34',5,14.00000,2,26273,5),(39,67,'2007-01-15 19:08:56',1,23.80915,1,2423,5),(40,7,'1990-11-27 12:24:34',5,44215.78978,7,31759,1),(41,28,'1973-09-19 19:00:50',8,120461.26871,7,36145,1),(42,46,'2003-05-16 01:23:07',1,28.79009,4,8448,2),(43,80,'2020-06-26 14:04:14',3,519554227.05000,8,36316,3),(44,5,'2003-05-06 05:15:57',10,16537187.62910,2,4681,2),(45,17,'2001-08-29 01:36:29',2,6620.00000,7,27781,3),(46,56,'1978-01-15 04:23:52',4,3497675.00000,1,22685,2),(47,39,'1974-09-22 02:06:58',7,0.00001,5,25756,4),(48,58,'1994-09-06 11:53:55',1,308.70900,3,19880,1),(49,43,'2012-02-19 15:09:58',7,4.05664,8,16065,1),(50,29,'2009-12-13 14:08:24',8,83.45644,4,6149,4),(51,45,'2013-05-05 21:34:22',1,348897.00000,7,3249,2),(52,59,'2020-08-06 21:10:50',5,0.60000,8,12722,3),(53,98,'1995-06-26 00:50:44',3,2282.78413,7,16934,4),(54,49,'1990-01-24 02:42:34',4,0.00001,1,12504,3),(55,80,'1972-01-15 07:08:53',5,5.07447,4,23033,4),(56,37,'1984-09-12 16:10:47',1,3678.34407,3,38479,1),(57,62,'2012-02-09 11:42:48',5,4888.49000,4,36851,4),(58,29,'1998-08-08 03:55:04',1,23717.91325,8,26634,4),(59,37,'2008-04-17 05:49:11',5,253753.52078,5,12268,2),(60,48,'2005-03-17 09:30:47',8,10078404.58872,8,3137,1),(61,9,'2017-06-02 06:43:36',2,22734654.59605,9,19709,1),(62,44,'2012-08-06 18:25:26',8,51479.87154,6,3712,4),(63,87,'1990-04-11 15:19:32',8,43.29662,1,21667,5),(64,49,'2018-08-10 11:58:21',3,191529113.06297,1,8247,2),(65,9,'2000-11-05 13:23:05',1,334215.17000,2,29707,4),(66,79,'2010-09-24 17:30:46',4,7452.82145,3,4577,5),(67,82,'1988-10-23 15:15:18',10,0.00001,4,9373,2),(68,46,'1979-12-15 05:55:06',3,22.23000,8,8444,2),(69,13,'1980-01-15 13:50:39',7,664.09200,4,26860,4),(70,51,'2015-10-12 10:27:40',2,10001.55000,9,36941,3),(71,64,'1990-09-16 13:41:01',3,43167.05454,1,9594,4),(72,82,'1994-06-27 04:38:38',7,737393069.39000,8,23485,2),(73,48,'2008-02-08 14:31:08',5,8454174.00000,7,30272,1),(74,43,'1985-10-10 19:05:29',10,3.48841,1,29051,2),(75,71,'1982-11-03 06:10:38',1,0.00001,3,25942,2),(76,48,'2007-08-26 18:57:20',9,3.50850,8,20178,4),(77,30,'1991-03-10 18:59:15',7,91177.53306,1,4700,4),(78,56,'1972-09-01 18:30:58',2,45679385.94380,4,13684,1),(79,83,'2021-01-13 20:37:46',3,50621195.80000,2,18759,4),(80,54,'1978-01-05 19:03:31',8,0.00001,2,23352,4),(81,98,'1993-06-11 14:09:03',5,5042843.59280,9,20100,5),(82,59,'1971-11-14 22:36:28',3,1255834.04138,8,24821,4),(83,96,'2015-04-13 13:42:45',7,67803545.83878,7,31361,1),(84,7,'2003-07-10 05:08:31',2,0.00001,5,20165,1),(85,41,'1980-06-30 13:18:07',9,27.71005,3,25869,1),(86,77,'1974-10-07 06:45:55',3,0.00001,8,4159,1),(87,51,'2013-04-01 11:25:32',6,11.00000,2,37371,4),(88,25,'1973-06-13 13:37:11',2,0.70000,5,27428,5),(89,26,'1972-05-07 07:26:27',10,1188.17940,1,32219,1),(90,92,'1983-04-09 19:50:59',6,7069.86500,3,1710,5),(91,69,'1983-01-10 08:12:06',5,508956.40000,6,9073,2),(92,66,'1991-05-17 11:36:14',1,0.00001,1,3594,3),(93,27,'1995-05-22 14:41:00',1,100338.30040,4,34702,1),(94,38,'1990-11-10 11:23:33',1,334.00000,6,5953,2),(95,47,'2004-05-05 03:31:06',5,2126.50000,1,36180,1),(96,64,'1988-03-12 21:56:30',3,343998377.88475,1,9499,3),(97,67,'1991-04-13 01:09:55',8,3939.78982,8,11329,1),(98,38,'2014-03-27 14:31:37',10,3126.96711,8,24057,1),(99,22,'1995-11-15 18:27:29',3,469388369.29803,9,14712,1),(100,33,'2008-12-09 22:42:59',2,50.00000,1,18715,4),(101,35,'2008-12-09 22:42:59',3,50.00000,2,18715,3),(102,35,'2008-12-09 22:42:59',2,100.00000,3,18715,2),(103,35,'2008-12-09 22:42:59',4,50.00000,4,18753,1),(104,35,'2008-12-09 22:42:59',4,50.00000,3,12365,3),(105,35,'2008-12-09 22:42:59',2,100.00000,1,123456,2);
/*!40000 ALTER TABLE `orders_frx_bid` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_frx_bid_BEFORE_INSERT` BEFORE INSERT ON `orders_frx_bid` FOR EACH ROW BEGIN
DECLARE balance_ord DECIMAL(64,5);
DECLARE cost INT;
DECLARE new_user_id INT;
SET new_user_id = NEW.user_id;
SELECT `profile_indiv`.balance INTO balance_ord FROM  `profile_indiv` WHERE new_user_id = user_id;
SET cost = NEW.total;
IF balance_ord < cost THEN 
	SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Low funds on the account';
END IF;
	
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_frx_bid_corp`
--

DROP TABLE IF EXISTS `orders_frx_bid_corp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_frx_bid_corp` (
  `id_orders_frx_bid_corp` int unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `frx_tools_id_frx_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int unsigned NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_frx_bid_corp`),
  KEY `fk_orders_frx_bid_corp_frx_tools1_idx` (`frx_tools_id_frx_tools`),
  KEY `fk_orders_frx_bid_corp_orders_type1_idx` (`orders_type_id_orders_type`),
  KEY `fk_orders_frx_bid_corp_user1_idx` (`user_id`),
  CONSTRAINT `fk_orders_frx_bid_corp_frx_tools1` FOREIGN KEY (`frx_tools_id_frx_tools`) REFERENCES `frx_tools` (`id_frx_tools`),
  CONSTRAINT `fk_orders_frx_bid_corp_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_frx_bid_corp_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_frx_bid_corp`
--

LOCK TABLES `orders_frx_bid_corp` WRITE;
/*!40000 ALTER TABLE `orders_frx_bid_corp` DISABLE KEYS */;
INSERT INTO `orders_frx_bid_corp` (`id_orders_frx_bid_corp`, `user_id`, `data`, `frx_tools_id_frx_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,100,'2002-01-14 06:57:06',10,0.00001,7,24297,3),(2,87,'1970-11-08 03:12:18',2,514619387.00000,6,30004,1),(3,69,'1985-12-22 03:41:54',10,1441.10995,3,21264,5),(4,83,'1973-11-21 12:14:07',9,1168.00000,3,26866,2),(5,3,'2013-03-06 08:09:32',10,7407.75449,4,4925,1),(6,76,'1972-03-17 17:23:15',10,25392.53237,7,13226,3),(7,67,'2011-12-15 22:19:06',3,10751.50000,9,24495,3),(8,63,'2005-10-12 14:15:32',3,0.00001,8,4918,4),(9,41,'1982-08-15 10:21:06',7,239922.13455,5,36235,4),(10,59,'1992-01-28 22:04:06',10,92.52776,2,1370,5),(11,52,'2006-08-17 10:32:38',10,3523841.60780,4,17929,5),(12,11,'2019-12-20 19:43:15',9,550549.60000,2,31174,1),(13,27,'2018-07-05 08:00:14',6,7315.77190,1,36616,1),(14,21,'2017-08-24 21:10:28',4,75.51437,4,23745,5),(15,55,'2007-12-10 01:30:54',4,0.00001,8,33540,5),(16,59,'2011-11-21 08:53:37',2,78.03578,3,5613,5),(17,7,'1970-03-20 21:31:59',8,105072192.00000,9,19150,1),(18,65,'2020-03-30 03:06:12',5,37122.93197,8,5102,2),(19,42,'2015-12-26 11:02:45',9,7637588.31740,1,25743,5),(20,11,'2016-07-29 09:44:25',5,240.20861,2,17628,5),(21,7,'2020-04-29 08:00:15',10,193681.58318,9,18116,5),(22,97,'1980-10-06 16:34:54',1,0.17055,8,1149,4),(23,3,'2013-10-25 10:36:44',3,0.00001,9,9816,2),(24,4,'1981-01-16 14:50:59',6,3.88700,1,9242,4),(25,93,'1972-08-18 17:01:22',1,72426195.45394,9,6090,5),(26,78,'2005-02-21 00:06:42',7,190663630.04416,7,14289,1),(27,61,'1977-01-12 21:28:45',7,57.65298,7,21438,5),(28,65,'1973-04-17 15:20:17',4,2726.28802,1,38710,2),(29,100,'2006-02-08 17:32:33',8,1.17410,6,4892,1),(30,96,'2008-01-07 18:26:20',9,584925924.08749,7,38398,3),(31,89,'2020-04-22 08:30:16',10,4.70000,6,31214,3),(32,80,'2005-10-22 03:19:17',9,8.60030,4,31111,3),(33,53,'1985-07-13 07:18:40',10,13111.66206,2,37253,5),(34,79,'1984-07-10 08:32:09',10,0.00001,6,29891,2),(35,40,'2017-10-21 07:11:12',9,2.76000,7,38157,2),(36,37,'1996-06-11 06:45:01',7,1466129.00000,1,22484,5),(37,47,'2005-02-05 09:28:54',3,0.70000,1,38238,4),(38,37,'1970-01-24 05:33:26',10,3118868.00000,4,25530,1),(39,68,'2000-12-24 21:10:30',9,0.00001,6,34068,4),(40,82,'2012-07-18 06:43:54',9,57297.04435,3,9448,4),(41,37,'2011-06-06 20:52:02',8,0.00001,1,25206,3),(42,86,'1976-08-12 20:37:05',6,2815921.71350,9,10517,3),(43,38,'1997-09-13 22:16:28',1,187.90000,6,2318,2),(44,19,'2013-01-12 23:44:13',9,0.00001,6,25247,2),(45,51,'1972-10-25 11:38:18',3,353.29240,5,33505,1),(46,87,'1970-10-02 17:35:46',6,6901327.96850,5,23209,5),(47,87,'2019-09-29 04:12:21',1,0.52327,7,11929,1),(48,56,'1990-01-22 06:36:33',5,5466.91910,7,2200,5),(49,59,'1975-02-25 15:34:06',2,56.44458,1,26018,5),(50,37,'1977-07-20 05:33:10',10,3216443.86312,4,2675,4),(51,1,'1993-04-21 20:44:55',3,4.00000,8,5430,3),(52,56,'1995-01-08 16:15:24',2,134.50000,4,36720,5),(53,99,'2011-10-03 12:09:05',6,95589293.00000,8,8411,5),(54,33,'1999-03-28 23:53:36',8,33025953.85086,2,37298,5),(55,63,'1998-07-29 09:04:17',3,0.00001,7,16268,1),(56,79,'1998-11-04 03:17:50',1,0.00001,3,35290,4),(57,61,'1990-10-31 12:37:49',10,0.47837,8,20390,4),(58,67,'2011-04-23 22:45:48',5,0.00001,1,12957,1),(59,64,'2002-08-02 02:21:33',1,171962.30709,7,33916,2),(60,50,'1973-07-24 02:16:43',5,7102515.41140,8,11767,1),(61,20,'2007-12-12 04:49:04',5,78770.23304,7,30638,3),(62,63,'2013-09-08 14:37:05',1,396481.43530,8,21348,3),(63,57,'1996-03-21 00:55:29',10,40667.90679,9,25366,1),(64,56,'2011-07-27 23:09:36',4,1.19501,2,20787,4),(65,38,'2011-09-18 16:14:04',10,20463013.07700,4,15858,5),(66,43,'1981-11-01 06:36:55',8,0.23800,4,36789,1),(67,6,'1974-05-16 00:47:24',4,357808.23047,2,22055,1),(68,77,'1979-12-07 11:05:30',10,16830.20347,3,37362,3),(69,89,'2019-09-13 10:59:43',7,4.86600,7,15318,4),(70,12,'1996-01-27 10:39:06',2,0.00001,3,26051,1),(71,27,'1980-03-24 03:37:04',4,12347207.94800,2,16437,3),(72,70,'1987-04-02 12:17:26',10,267.08912,9,27664,3),(73,27,'1975-06-26 03:52:02',6,3615.72242,8,16246,3),(74,35,'1981-02-05 20:43:18',1,971626.24319,4,35430,5),(75,14,'1996-12-07 08:25:49',5,1.12591,8,18407,4),(76,13,'1987-08-26 07:46:00',9,51228872.46000,5,2581,3),(77,21,'2011-06-10 22:53:21',10,0.21856,4,35674,5),(78,23,'1984-02-12 15:05:58',7,2.14570,2,9097,5),(79,75,'1988-10-09 06:23:44',6,26161.90000,2,22149,3),(80,35,'2020-08-31 12:45:10',7,661.50000,3,13218,4),(81,41,'1992-04-27 14:40:38',10,1.00000,2,33404,5),(82,92,'2016-02-26 14:35:15',7,6450.81165,5,14020,5),(83,44,'2010-07-13 07:40:27',10,92623172.29657,1,15841,2),(84,95,'1990-10-10 13:59:57',3,26959.14000,1,21762,3),(85,79,'2003-04-10 13:13:27',4,30972607.33872,8,26090,5),(86,57,'2012-08-18 22:53:29',6,31989.00000,6,28781,4),(87,8,'2004-12-14 23:23:41',8,916.12290,5,29685,4),(88,92,'1974-04-10 17:08:32',10,1925.36133,9,33815,2),(89,76,'1984-06-10 12:55:56',7,0.00001,3,32493,5),(90,23,'1989-04-10 12:07:44',1,931.36827,2,1183,3),(91,83,'2020-11-26 10:34:50',5,0.00001,5,7935,3),(92,76,'1982-11-23 05:54:20',4,58105198.63380,8,24071,1),(93,63,'1981-01-23 00:38:08',8,771933876.45000,4,18648,1),(94,2,'1980-04-01 01:24:36',8,26552.00000,7,1526,2),(95,46,'2004-04-12 20:07:31',6,7892.64790,4,28930,4),(96,34,'1976-02-19 05:56:23',1,122164.64664,4,13350,1),(97,8,'2001-06-07 23:11:56',2,0.00001,4,26508,5),(98,73,'1972-03-08 07:51:34',1,0.00001,2,26509,5),(99,6,'1970-01-17 03:55:48',9,349929574.92700,2,37125,3),(100,95,'1977-08-16 23:12:58',1,191758.89362,4,12704,3);
/*!40000 ALTER TABLE `orders_frx_bid_corp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_frx_bid_corp_BEFORE_INSERT` BEFORE INSERT ON `orders_frx_bid_corp` FOR EACH ROW BEGIN
DECLARE balance_ord DECIMAL(64,5);
DECLARE cost INT;
DECLARE new_user_id INT;
SET new_user_id = NEW.user_id;
SELECT `profile_indiv`.balance INTO balance_ord FROM  `profile_indiv` WHERE new_user_id = user_id;
SET cost = NEW.total;
IF balance_ord < cost THEN 
	SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Low funds on the account';
END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_stock_asc`
--

DROP TABLE IF EXISTS `orders_stock_asc`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_stock_asc` (
  `id_orders_stock_asc` int NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `stock_tools_id_stock_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_stock_asc`),
  KEY `fk_orders_stock_asc_user1_idx` (`user_id`),
  KEY `fk_orders_stock_asc_stock_tools1_idx` (`stock_tools_id_stock_tools`),
  KEY `fk_orders_stock_asc_orders_type1_idx` (`orders_type_id_orders_type`),
  CONSTRAINT `fk_orders_stock_asc_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_stock_asc_stock_tools1` FOREIGN KEY (`stock_tools_id_stock_tools`) REFERENCES `stock_tools` (`id_stock_tools`),
  CONSTRAINT `fk_orders_stock_asc_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_stock_asc`
--

LOCK TABLES `orders_stock_asc` WRITE;
/*!40000 ALTER TABLE `orders_stock_asc` DISABLE KEYS */;
INSERT INTO `orders_stock_asc` (`id_orders_stock_asc`, `user_id`, `data`, `stock_tools_id_stock_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,87,'2021-01-24 12:20:32',6,141.94533,3,3859,2),(2,39,'1971-04-06 01:59:10',3,161504686.49490,9,36974,3),(3,96,'2012-07-22 02:01:11',6,74.33923,3,23941,4),(4,96,'1988-07-30 22:47:47',4,291.75547,8,27316,5),(5,37,'2015-02-26 14:44:04',4,111.95800,4,14546,2),(6,32,'1975-09-07 05:26:38',8,333.24000,7,17979,3),(7,29,'2002-03-09 10:17:55',8,596.28949,1,15157,2),(8,87,'1993-06-06 21:22:32',5,33196903.90000,5,16680,3),(9,52,'1974-09-17 13:09:15',4,0.28619,8,13116,5),(10,66,'1993-11-29 08:39:10',6,10.47651,9,10433,1),(11,23,'2014-06-07 08:46:03',5,806.37193,7,16698,4),(12,56,'2003-10-26 21:42:51',9,13.23156,2,12155,1),(13,6,'1976-01-29 16:51:13',8,9118.53000,2,4241,3),(14,70,'1984-12-16 04:28:38',8,1.45829,3,8105,5),(15,50,'1987-11-06 02:12:34',1,1495724.90000,7,33689,2),(16,77,'1992-05-23 17:40:18',5,1245.95000,8,14309,5),(17,24,'1989-08-06 19:00:54',7,0.00001,2,7152,4),(18,63,'2004-01-06 04:10:07',6,509.54935,4,12126,1),(19,16,'2015-03-10 17:07:36',1,37.44800,3,3956,3),(20,13,'2014-04-21 18:10:54',8,2682948.99196,8,28275,1),(21,29,'1982-02-14 07:33:23',10,431094587.25529,1,9832,3),(22,1,'1985-10-09 19:18:52',6,434543491.00000,1,1471,2),(23,2,'2003-01-18 19:30:58',6,23603.20000,2,20902,1),(24,57,'2011-05-23 21:19:50',3,0.00001,2,5849,4),(25,45,'1990-07-14 14:01:33',8,898827765.00000,7,1411,5),(26,72,'2017-11-17 06:23:14',6,198599.25950,2,7145,2),(27,71,'1970-11-24 20:08:53',8,8.50000,5,25142,5),(28,42,'1980-11-02 17:17:58',4,228.05719,9,33095,3),(29,55,'2006-11-15 01:15:26',6,0.00001,8,13225,4),(30,100,'1990-12-01 10:12:26',7,18958696.60000,7,30239,2),(31,1,'2012-06-19 01:02:19',10,0.00001,7,16365,2),(32,46,'2020-07-24 15:41:53',10,549.76894,3,16954,4),(33,73,'1985-10-11 08:37:41',10,407353.37721,1,8595,2),(34,78,'1990-08-17 11:10:38',6,576.97280,7,21574,4),(35,55,'2009-02-21 13:13:25',10,6.76000,2,35461,2),(36,43,'2012-02-24 06:56:57',7,159115313.52340,2,6724,5),(37,71,'1988-12-29 19:02:19',5,37541410.00000,9,23146,4),(38,69,'1980-04-07 08:37:05',9,411.10511,2,22238,1),(39,22,'2011-10-01 04:12:05',4,409.44532,7,17495,3),(40,83,'1979-06-18 15:39:51',4,4622.93870,6,3025,2),(41,16,'1995-08-10 03:27:42',4,110.89466,7,4742,1),(42,44,'1987-07-17 11:41:06',9,0.00001,7,21309,1),(43,23,'1995-07-05 20:14:38',6,17216.00000,7,34684,1),(44,58,'2013-01-21 13:53:01',4,122.67310,6,24905,4),(45,19,'1982-03-20 22:46:34',9,406650.86100,9,9860,4),(46,55,'2010-11-07 08:05:12',3,794768939.00000,2,29742,2),(47,44,'2016-07-31 23:50:39',1,662.52069,4,23775,4),(48,8,'2014-08-06 19:29:58',7,9323.21330,6,9827,3),(49,11,'1999-01-12 02:14:00',10,16007.65300,2,16625,5),(50,68,'1981-09-07 11:39:38',8,6011.87028,6,23970,2),(51,92,'2005-08-29 08:42:32',9,226959879.12946,2,14955,4),(52,11,'2001-04-19 07:54:19',4,1106.50000,5,1881,3),(53,26,'2002-03-14 04:16:51',6,334.20000,3,34142,1),(54,38,'1991-02-13 10:41:27',2,2461036.27600,4,38170,2),(55,3,'1991-02-03 16:21:22',3,10290.87170,7,5982,2),(56,67,'1979-10-26 07:28:45',9,2649365.00000,9,25481,3),(57,99,'1994-12-20 21:10:31',3,5541.30000,5,12525,3),(58,72,'2003-04-03 07:48:03',4,442969538.00000,8,20607,1),(59,27,'2000-10-22 14:54:34',5,236909.03000,4,25555,1),(60,18,'2000-11-14 14:15:26',2,241627.17205,4,1626,5),(61,45,'2021-01-24 16:09:11',1,3.33307,6,8215,4),(62,9,'1987-05-02 17:50:52',2,536810165.31139,1,3898,1),(63,55,'1973-11-19 01:48:23',4,4426.64253,6,3904,3),(64,57,'2016-01-21 01:27:35',8,544.07979,6,19467,4),(65,91,'2013-04-03 15:30:47',8,26.89000,4,14173,5),(66,13,'1974-10-29 19:48:23',5,106718.35100,8,4023,4),(67,64,'2014-09-14 23:06:45',5,0.00001,2,11986,1),(68,15,'2016-02-05 11:46:29',2,21675446.54100,1,5295,2),(69,35,'1994-04-22 00:14:36',5,3954889.00000,5,25388,5),(70,45,'2000-03-02 00:55:15',6,368253.12000,5,3394,5),(71,28,'2000-12-16 20:28:29',1,51.23791,7,19990,5),(72,99,'1985-02-21 03:15:21',2,4894.79523,9,1328,1),(73,1,'2001-09-16 18:36:23',7,69.00000,2,7465,3),(74,56,'1991-04-09 06:19:31',3,0.00001,9,8458,2),(75,22,'1977-01-03 17:19:52',2,0.00001,4,18409,1),(76,17,'1979-12-16 08:11:03',3,2557052.64000,6,17561,3),(77,96,'2013-05-20 11:08:49',9,1219687.34187,4,34249,5),(78,1,'1985-11-02 07:24:20',1,0.00001,9,25172,1),(79,41,'1978-05-23 09:11:52',4,2851.02492,9,3867,3),(80,25,'2013-08-16 16:47:11',9,20547100.84000,6,22643,1),(81,21,'1997-01-30 02:55:48',1,2.10460,1,2887,1),(82,21,'2006-08-10 11:36:25',1,0.00001,6,16117,2),(83,34,'1986-10-09 21:25:08',1,4.89100,3,4559,5),(84,86,'2018-10-16 16:27:45',7,3418227.36020,1,11020,1),(85,15,'2008-08-10 05:25:09',9,5.31121,9,38980,2),(86,22,'1996-07-07 22:58:48',1,0.00001,2,36407,3),(87,75,'1997-05-23 19:16:16',10,0.96620,9,33821,3),(88,71,'2009-01-07 21:46:36',10,5.34361,1,22323,3),(89,84,'1977-11-24 04:40:06',4,1283707.01000,9,3929,5),(90,39,'2005-08-19 06:39:42',7,0.00001,8,22425,4),(91,53,'2017-03-24 04:56:46',9,43046702.00000,6,38036,4),(92,70,'2012-11-07 02:38:22',1,0.00001,5,3867,5),(93,100,'1996-04-13 09:11:40',4,0.00001,4,25845,5),(94,95,'1984-09-23 21:24:36',3,265641.02240,2,10981,3),(95,13,'2020-03-08 03:17:50',4,0.00001,4,24958,2),(96,44,'1982-12-03 03:56:34',6,9520893.13411,8,11400,3),(97,100,'1987-02-14 18:25:48',4,5.62100,4,37402,2),(98,45,'2019-03-17 22:14:22',1,128344659.00000,9,4687,2),(99,92,'1983-05-09 11:04:46',9,0.00001,5,22452,4),(100,77,'1971-04-21 13:53:35',3,0.00001,2,32035,2);
/*!40000 ALTER TABLE `orders_stock_asc` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_stock_asc_BEFORE_INSERT` BEFORE INSERT ON `orders_stock_asc` FOR EACH ROW BEGIN
DECLARE quantity_ord INT;
DECLARE quantity_ord_asc INT;
DECLARE quantity_ord_bid INT;
DECLARE user_id_ord INT;
DECLARE stock_tools_id_stock_tools_ord INT;
SET stock_tools_id_stock_tools_ord = NEW.stock_tools_id_stock_tools;
SET user_id_ord = NEW.user_id;
SET quantity_ord = NEW.quantity;
SELECT 
	SUM(quantity) 
INTO 
	quantity_ord_asc
FROM 
	orders_stock_asc 
WHERE user_id_ord = user_id AND stock_tools_id_stock_tools_ord = stock_tools_id_stock_tools;
SELECT 
	SUM(quantity) 
INTO
	quantity_ord_bid
FROM 
	orders_stock_bid 
WHERE user_id_ord = user_id AND stock_tools_id_stock_tools_ord = stock_tools_id_stock_tools ;
IF (IFNULL(quantity_ord_bid, 0) - IFNULL(quantity_ord_asc, 0)) < quantity_ord THEN
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'you do nоt have enough to sell';
END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_stock_asc_corp`
--

DROP TABLE IF EXISTS `orders_stock_asc_corp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_stock_asc_corp` (
  `id_orders_stock_asc_corp` int NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `stock_tools_id_stock_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_stock_asc_corp`),
  KEY `fk_orders_stock_asc_corp_user1_idx` (`user_id`),
  KEY `fk_orders_stock_asc_corp_stock_tools1_idx` (`stock_tools_id_stock_tools`),
  KEY `fk_orders_stock_asc_corp_orders_type1_idx` (`orders_type_id_orders_type`),
  CONSTRAINT `fk_orders_stock_asc_corp_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_stock_asc_corp_stock_tools1` FOREIGN KEY (`stock_tools_id_stock_tools`) REFERENCES `stock_tools` (`id_stock_tools`),
  CONSTRAINT `fk_orders_stock_asc_corp_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_stock_asc_corp`
--

LOCK TABLES `orders_stock_asc_corp` WRITE;
/*!40000 ALTER TABLE `orders_stock_asc_corp` DISABLE KEYS */;
INSERT INTO `orders_stock_asc_corp` (`id_orders_stock_asc_corp`, `user_id`, `data`, `stock_tools_id_stock_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,43,'2001-09-18 22:28:53',9,6.85670,7,13696,4),(2,33,'2003-08-01 12:12:15',10,459836456.00000,5,11978,3),(3,53,'2010-09-17 00:41:02',8,7.16280,6,1979,4),(4,32,'2014-08-29 02:31:18',9,0.00001,1,16154,3),(5,77,'2005-09-09 03:06:40',8,798297.00000,1,35808,1),(6,90,'2001-05-16 07:11:03',5,1298813.36800,2,16672,2),(7,43,'1979-12-12 15:27:37',7,2998104.93800,2,22816,4),(8,60,'1994-12-03 17:25:28',2,0.41493,6,37197,4),(9,68,'1997-09-06 18:24:58',3,229888.60000,5,25192,4),(10,65,'1992-04-06 04:01:25',3,25377.83000,5,29875,2),(11,53,'2007-11-02 06:49:29',7,3282710.90000,4,5611,2),(12,28,'1997-09-25 02:08:06',1,9118.25295,7,17837,1),(13,83,'2002-05-11 11:04:28',6,27167457.81628,6,25225,5),(14,62,'1999-12-13 15:44:06',9,44397370.90300,7,33329,4),(15,3,'1991-01-13 18:58:23',7,510.44300,3,34115,3),(16,23,'1982-09-21 03:06:32',6,0.00001,4,23501,5),(17,54,'2019-10-05 06:36:11',10,6245746.99607,5,7991,3),(18,19,'2002-05-06 09:31:24',6,125088.51300,2,16059,4),(19,89,'2014-06-22 11:17:39',2,10193.00000,3,20221,5),(20,52,'1983-06-03 06:06:36',9,1662.46633,3,26394,1),(21,91,'2019-06-26 11:48:03',4,1.00000,8,34932,5),(22,20,'2017-12-26 01:17:51',7,453645.80000,8,8708,5),(23,39,'1979-03-04 06:14:21',5,5995400.00000,3,25117,2),(24,31,'2012-04-30 19:17:28',1,0.00001,1,3791,2),(25,6,'1995-05-08 20:13:44',1,69.16092,6,36896,5),(26,54,'1987-10-07 05:39:32',4,541154065.57901,8,28530,2),(27,43,'2016-08-29 14:34:07',9,18.74934,6,24473,2),(28,96,'1995-09-07 14:36:54',1,75249352.00267,2,22844,4),(29,63,'2020-12-13 17:48:29',10,0.00001,2,17721,5),(30,54,'2002-07-16 02:41:54',5,248329127.39000,6,15456,4),(31,70,'1986-08-30 19:02:59',4,41241143.55907,1,28587,1),(32,55,'1994-03-04 06:05:27',6,303815.77060,8,28717,4),(33,40,'1998-03-02 14:55:51',10,34268.00000,5,12725,1),(34,77,'1998-03-11 00:59:31',3,42.78044,9,32375,2),(35,98,'2013-08-03 20:28:45',3,0.00001,5,4985,2),(36,80,'2012-12-12 04:20:53',9,5873.23147,6,19750,4),(37,12,'1987-08-24 09:47:43',3,8867.45674,3,21235,3),(38,36,'2008-02-01 02:17:20',2,136831.86774,8,16310,3),(39,12,'2001-09-11 04:39:12',9,0.93605,4,34170,3),(40,6,'1988-11-05 23:19:39',4,60469.00000,6,1664,5),(41,83,'2019-09-27 07:43:15',1,11457.24000,7,24474,1),(42,95,'1977-04-05 21:07:23',6,1182374.57980,6,21472,4),(43,70,'2003-11-17 13:58:34',10,79.42018,3,15686,3),(44,89,'2010-08-05 06:12:14',8,1083.59000,1,2643,4),(45,14,'2010-03-22 04:22:44',8,515.67726,8,18159,1),(46,47,'1981-04-19 04:12:00',6,0.20000,2,9274,5),(47,11,'1989-08-19 07:29:12',7,0.00001,4,9195,1),(48,59,'2014-08-29 04:22:58',10,46727.90000,9,34367,2),(49,9,'2009-09-01 21:45:44',1,518786.85810,6,4576,1),(50,50,'1982-11-13 10:02:18',2,606445022.74000,1,13020,3),(51,33,'1998-05-31 22:41:20',10,2.00000,8,25345,3),(52,48,'1997-03-08 22:41:43',10,0.00001,5,4093,1),(53,15,'1996-02-12 02:31:41',7,462049922.65150,4,30136,1),(54,73,'2019-02-03 00:45:21',5,36412.85456,5,22686,4),(55,52,'1985-03-23 16:27:44',7,59044.56000,1,4456,3),(56,58,'2003-05-04 08:31:58',1,45390.84994,4,38093,5),(57,45,'1971-05-07 18:30:22',2,9588.83515,2,8877,4),(58,55,'2009-07-21 02:26:02',8,17943129.50000,2,26715,4),(59,83,'1999-07-29 23:04:29',9,1.44730,3,26229,4),(60,92,'1998-02-23 22:05:25',4,0.00001,8,25156,5),(61,34,'1974-10-15 03:47:24',7,1583435.06000,1,13705,5),(62,80,'2003-12-21 23:03:02',2,22560056.45376,8,6934,4),(63,85,'1989-08-08 00:04:47',3,2603129.03299,7,17240,2),(64,86,'1995-01-26 15:37:49',1,122.92400,9,25299,5),(65,62,'2011-08-12 19:26:05',6,5193103.44000,5,33260,3),(66,10,'1972-10-23 12:01:40',1,4278.53770,8,20435,3),(67,9,'1990-06-03 01:42:18',6,1.00000,8,32067,4),(68,72,'1989-03-20 04:10:12',1,0.06795,7,10633,3),(69,32,'2008-06-07 14:42:45',10,174.95000,1,20575,2),(70,2,'1974-05-24 04:27:04',9,4355147.00290,3,29728,4),(71,87,'1989-02-22 22:41:15',2,17.72649,8,7632,2),(72,69,'2006-04-23 09:49:42',10,6035878.32600,4,25818,3),(73,43,'1973-09-26 08:30:40',9,110293.00000,1,3699,5),(74,78,'2003-06-11 12:04:07',7,0.00001,1,24492,5),(75,63,'1979-10-27 19:56:45',3,7502.00943,7,16862,2),(76,10,'1983-02-18 11:40:37',4,2002.49000,2,8239,3),(77,66,'1994-08-04 12:28:05',5,0.00001,4,8654,5),(78,40,'2013-09-17 17:11:26',2,18794275.75188,9,3169,1),(79,92,'1971-07-06 01:18:49',5,5226.63730,7,4046,5),(80,29,'1986-06-17 19:48:21',6,5556.61500,9,37827,5),(81,1,'1987-04-29 12:49:36',4,60409.13428,4,33294,5),(82,39,'1987-12-03 22:56:58',1,3.87460,1,7176,5),(83,92,'2010-12-30 16:41:09',5,2089.51600,6,2121,4),(84,74,'2012-12-11 12:39:10',3,387520982.89312,4,24614,3),(85,56,'1979-04-24 17:23:45',9,137547933.25000,6,32299,4),(86,90,'2001-02-27 07:48:52',10,54579.00879,6,14845,1),(87,34,'1997-03-27 14:42:46',7,2.91427,3,25066,3),(88,32,'1995-05-02 21:02:19',1,931612.47698,3,27195,4),(89,40,'1978-04-14 00:22:07',10,52001.92847,7,3089,2),(90,39,'1994-02-06 05:00:13',3,5585.14878,4,10054,4),(91,21,'1981-03-27 05:19:32',3,5576400.00000,5,1102,1),(92,20,'1992-02-16 19:24:03',7,14452680.02564,5,10670,2),(93,17,'2019-11-14 06:55:41',6,2.40000,7,13379,4),(94,94,'1999-11-04 11:38:42',3,0.00001,2,29688,5),(95,38,'1998-02-05 20:25:02',9,3.67353,3,9373,5),(96,10,'2020-01-24 12:26:57',8,6361.24040,3,14193,5),(97,20,'1977-12-29 08:28:06',1,39041.57874,4,15584,3),(98,77,'2019-05-08 23:22:03',4,56569868.05312,7,7176,3),(99,52,'2018-12-25 05:31:35',8,226024614.24510,5,17361,3),(100,77,'2003-06-08 02:59:14',2,35.42800,7,23056,4);
/*!40000 ALTER TABLE `orders_stock_asc_corp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_stock_asc_corp_BEFORE_INSERT` BEFORE INSERT ON `orders_stock_asc_corp` FOR EACH ROW BEGIN
DECLARE quantity_ord INT;
DECLARE quantity_ord_asc INT;
DECLARE quantity_ord_bid INT;
DECLARE user_id_ord INT;
DECLARE stock_tools_id_stock_tools_ord INT;
SET stock_tools_id_stock_tools_ord = NEW.stock_tools_id_stock_tools;
SET user_id_ord = NEW.user_id;
SET quantity_ord = NEW.quantity;
SELECT 
	SUM(quantity) 
INTO 
	quantity_ord_asc
FROM 
	orders_stock_asc_corp 
WHERE user_id_ord = user_id AND stock_tools_id_stock_tools_ord = stock_tools_id_stock_tools;
SELECT 
	SUM(quantity) 
INTO
	quantity_ord_bid
FROM 
	orders_stock_bid_corp 
WHERE user_id_ord = user_id AND stock_tools_id_stock_tools_ord = stock_tools_id_stock_tools ;
IF (IFNULL(quantity_ord_bid, 0) - IFNULL(quantity_ord_asc, 0)) < quantity_ord THEN
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'you do nоt have enough to sell';
END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_stock_bid`
--

DROP TABLE IF EXISTS `orders_stock_bid`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_stock_bid` (
  `id_orders_stock_bid` int unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `stock_tools_id_stock_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int unsigned NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_stock_bid`),
  KEY `fk_orders_stock_bid_user1_idx` (`user_id`),
  KEY `fk_orders_stock_bid_stock_tools1_idx` (`stock_tools_id_stock_tools`),
  KEY `fk_orders_stock_bid_orders_type1_idx` (`orders_type_id_orders_type`),
  CONSTRAINT `fk_orders_stock_bid_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_stock_bid_stock_tools1` FOREIGN KEY (`stock_tools_id_stock_tools`) REFERENCES `stock_tools` (`id_stock_tools`),
  CONSTRAINT `fk_orders_stock_bid_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_stock_bid`
--

LOCK TABLES `orders_stock_bid` WRITE;
/*!40000 ALTER TABLE `orders_stock_bid` DISABLE KEYS */;
INSERT INTO `orders_stock_bid` (`id_orders_stock_bid`, `user_id`, `data`, `stock_tools_id_stock_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,7,'1976-11-26 07:04:01',7,7.87229,5,5475,4),(2,100,'1993-05-02 00:17:42',2,76.00000,6,15416,3),(3,70,'1976-07-30 23:09:28',1,1271.63589,2,14350,4),(4,2,'2019-09-05 04:36:05',7,38550706.85500,8,25958,2),(5,98,'2006-03-29 18:14:24',4,0.00001,6,10488,1),(6,1,'1987-02-06 10:57:13',10,691116269.57508,4,15090,3),(7,3,'1996-04-13 02:04:13',10,1.73369,8,16488,4),(8,18,'2007-10-04 16:48:59',2,4325476.83619,3,32269,4),(9,58,'2006-05-16 12:36:19',10,73.69353,7,19386,5),(10,12,'2005-04-24 19:46:58',9,292487700.63514,3,4656,5),(11,56,'1982-11-07 11:14:35',9,266071370.90942,3,8522,4),(12,18,'2018-12-22 17:55:55',9,2794.49300,4,19388,4),(13,59,'1978-03-17 13:59:27',6,15951672.37030,1,22839,5),(14,36,'2013-09-18 02:18:38',6,5481.66200,8,17760,3),(15,68,'2014-06-27 10:34:42',6,147.79791,7,5336,5),(16,72,'1998-06-12 01:57:38',6,30819083.19552,7,37145,5),(17,19,'2003-07-09 02:01:44',6,229.27000,1,14666,5),(18,91,'2013-06-22 06:37:28',8,226.40500,1,34005,5),(19,65,'1993-10-14 20:20:32',4,0.00001,8,38451,5),(20,62,'2006-10-17 09:48:03',5,0.39200,8,15200,4),(21,56,'2006-12-22 09:46:58',1,5301.29210,4,37420,4),(22,17,'2004-09-06 04:16:41',2,93921.13360,6,14309,3),(23,93,'1987-09-20 02:05:44',8,421.19780,5,29572,1),(24,78,'2013-06-15 11:59:29',2,4.01670,2,1803,4),(25,30,'1980-08-04 15:48:35',9,1487.74000,2,29250,2),(26,17,'2013-09-08 00:16:02',6,176.00000,1,13104,4),(27,1,'2009-12-08 03:00:17',8,12.44360,9,25097,2),(28,81,'2019-06-03 00:32:46',7,793.61463,7,1539,1),(29,80,'2001-06-08 17:45:37',3,274670754.27420,6,29852,3),(30,70,'1989-12-20 15:04:16',9,97230.40000,1,7512,5),(31,42,'1991-04-08 04:55:52',5,18147173.52589,1,3303,5),(32,4,'2018-01-08 14:05:55',6,829812.37420,4,3839,1),(33,53,'2016-09-17 11:46:16',6,45.76300,3,14042,5),(34,60,'2016-01-14 13:09:31',3,3736.07136,8,1370,1),(35,25,'1970-12-30 23:28:00',6,3.00000,7,37390,5),(36,47,'2016-07-03 06:53:55',8,14.60728,4,28786,2),(37,26,'2009-04-07 02:45:31',8,1.61227,7,8752,1),(38,64,'1990-05-15 20:58:36',6,0.00001,2,30446,4),(39,79,'1982-05-28 18:56:04',4,190.49000,2,13174,5),(40,28,'1982-03-21 08:04:53',1,261783.06100,7,11606,4),(41,22,'2003-12-29 04:38:03',5,25923.87100,5,17455,2),(42,17,'1987-02-23 11:02:43',6,1.29296,5,19077,4),(43,31,'1997-12-09 02:21:39',1,1.01096,7,12048,2),(44,22,'2007-03-09 14:35:10',7,197.71962,3,36147,4),(45,26,'1994-12-15 06:18:47',9,26256101.22900,7,27156,1),(46,10,'1981-01-26 19:22:58',4,16.50100,6,18841,5),(47,46,'2015-05-16 18:19:41',6,262349.06511,6,21929,4),(48,52,'2009-05-31 20:27:58',3,0.00001,3,2728,2),(49,19,'1991-07-16 22:34:09',1,0.44142,1,10265,4),(50,11,'2004-12-27 15:00:59',3,636711864.00000,8,25389,4),(51,89,'1990-08-31 03:34:01',6,290.74248,6,24368,1),(52,9,'2017-03-04 08:48:55',7,509.11389,1,32486,4),(53,89,'2020-10-11 02:28:14',10,0.00001,3,11823,4),(54,20,'1974-09-30 17:35:10',2,2.65800,7,34894,2),(55,81,'2001-03-03 16:25:37',5,0.50000,7,4201,1),(56,100,'2005-10-24 23:48:30',6,0.00001,6,6290,3),(57,95,'1992-01-04 09:22:08',10,5218093.50000,7,32047,1),(58,66,'2010-08-10 06:22:13',6,40.04960,8,14239,2),(59,92,'1993-02-17 17:41:25',8,9955.10040,2,33202,2),(60,55,'2015-02-05 08:56:28',9,1.45590,3,28850,4),(61,23,'1997-02-26 22:46:54',7,47272.60000,9,30710,1),(62,39,'2006-01-27 18:39:35',8,0.00001,6,32328,5),(63,5,'2013-12-29 05:53:41',7,7189365.37963,6,17061,5),(64,75,'1987-10-05 12:56:33',9,92.63811,8,24692,1),(65,7,'2016-08-04 22:31:13',7,44.60000,1,21935,3),(66,26,'2018-09-18 04:34:38',7,0.00001,5,4371,5),(67,79,'1971-12-06 03:24:00',7,3877.91930,6,22851,5),(68,91,'1986-06-16 01:22:56',3,0.00001,9,25214,3),(69,27,'2015-01-07 20:53:33',2,8561.00000,9,8724,2),(70,63,'1991-05-20 09:42:32',8,65.43150,9,12169,1),(71,28,'1978-08-07 19:08:17',10,2823828.92000,3,28964,4),(72,44,'1998-11-30 14:47:20',4,393069.62341,5,27754,3),(73,27,'1982-07-19 10:55:23',4,1156631.25690,9,2135,1),(74,7,'1979-06-20 01:33:15',2,505356.00000,3,20933,5),(75,8,'2017-03-18 01:18:24',2,8.52629,3,37724,4),(76,53,'2017-04-12 23:24:17',5,437.38402,2,21586,2),(77,52,'1988-10-16 19:28:14',3,157404738.60000,2,14431,5),(78,50,'1997-11-23 08:50:56',2,50.31410,3,23434,1),(79,1,'1989-05-16 01:27:23',4,10.00000,3,30338,2),(80,22,'1995-05-30 19:29:40',1,3.00000,9,9281,1),(81,22,'2014-12-12 05:11:45',3,3798.66800,5,11479,1),(82,92,'2009-09-02 05:11:03',8,314500.89190,7,19246,2),(83,39,'1974-10-24 06:09:58',10,36739.00000,2,25597,4),(84,52,'1990-11-17 00:11:10',1,4811.50000,3,1378,5),(85,50,'1987-04-28 17:28:43',2,308.00000,9,5920,1),(86,15,'2014-03-28 04:47:12',7,201.00400,3,5829,3),(87,46,'1981-10-17 10:36:20',2,7.80000,7,23183,4),(88,38,'1982-12-14 06:06:11',7,4.01725,1,13849,5),(89,57,'2019-04-27 10:57:57',7,12.52770,7,37472,2),(90,93,'2001-12-17 22:50:35',9,7250267.54000,7,26544,2),(91,1,'1982-07-30 19:03:47',2,186.02520,4,37830,3),(92,4,'1972-01-12 16:10:13',1,42305.97256,8,19376,2),(93,40,'2008-04-03 16:27:41',5,21.01700,4,22991,2),(94,13,'2017-01-02 06:32:14',10,2.53000,3,3509,2),(95,98,'1975-07-05 14:24:39',5,0.00001,7,32479,3),(96,100,'1976-11-27 04:48:35',6,115563.72031,7,5125,1),(97,47,'1989-06-27 02:02:50',1,0.00001,4,19505,2),(98,15,'1973-05-31 19:58:56',4,4.43016,1,11031,5),(99,96,'2018-01-24 01:46:34',10,52330784.65120,1,20857,4),(100,16,'1973-03-21 14:07:43',9,5121.04027,3,19034,3);
/*!40000 ALTER TABLE `orders_stock_bid` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_stock_bid_BEFORE_INSERT` BEFORE INSERT ON `orders_stock_bid` FOR EACH ROW BEGIN
DECLARE balance_ord DECIMAL(64,5);
DECLARE cost INT;
DECLARE new_user_id INT;
SET new_user_id = NEW.user_id;
SELECT `profile_indiv`.balance INTO balance_ord FROM  `profile_indiv` WHERE new_user_id = user_id;
SET cost = NEW.total;
IF balance_ord < cost THEN 
	SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Low funds on the account';
END IF;
	
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_stock_bid_corp`
--

DROP TABLE IF EXISTS `orders_stock_bid_corp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_stock_bid_corp` (
  `id_orders_stock_bid_corp` int unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int unsigned NOT NULL,
  `data` datetime NOT NULL,
  `stock_tools_id_stock_tools` int NOT NULL,
  `rate` decimal(64,5) NOT NULL,
  `quantity` int unsigned NOT NULL,
  `total` decimal(64,5) GENERATED ALWAYS AS ((`rate` * `quantity`)) VIRTUAL,
  `volume` int NOT NULL,
  `orders_type_id_orders_type` int NOT NULL,
  PRIMARY KEY (`id_orders_stock_bid_corp`),
  KEY `fk_orders_stock_bid_corp_user1_idx` (`user_id`),
  KEY `fk_orders_stock_bid_corp_orders_type1_idx` (`orders_type_id_orders_type`),
  KEY `fk_orders_stock_bid_corp_stock_tools1_idx` (`stock_tools_id_stock_tools`),
  CONSTRAINT `fk_orders_stock_bid_corp_orders_type1` FOREIGN KEY (`orders_type_id_orders_type`) REFERENCES `orders_type` (`id_orders_type`),
  CONSTRAINT `fk_orders_stock_bid_corp_stock_tools1` FOREIGN KEY (`stock_tools_id_stock_tools`) REFERENCES `stock_tools` (`id_stock_tools`),
  CONSTRAINT `fk_orders_stock_bid_corp_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_stock_bid_corp`
--

LOCK TABLES `orders_stock_bid_corp` WRITE;
/*!40000 ALTER TABLE `orders_stock_bid_corp` DISABLE KEYS */;
INSERT INTO `orders_stock_bid_corp` (`id_orders_stock_bid_corp`, `user_id`, `data`, `stock_tools_id_stock_tools`, `rate`, `quantity`, `volume`, `orders_type_id_orders_type`) VALUES (1,54,'2013-02-26 05:56:15',3,9211.07967,5,38008,1),(2,60,'1997-10-07 08:40:37',7,50.00000,5,15969,2),(3,24,'1993-04-30 05:29:41',4,1.00000,1,28936,1),(4,37,'1981-04-07 07:05:33',9,0.24600,2,18938,5),(5,14,'2021-01-12 08:01:49',9,233.51000,1,10727,3),(6,14,'2019-09-06 21:31:21',4,3090617.52587,4,6865,5),(7,79,'1977-04-12 11:18:20',10,0.00001,5,10299,3),(8,87,'2020-05-26 15:59:15',7,64.08140,5,5889,5),(9,71,'1972-12-21 08:17:37',2,58753176.00000,5,19744,4),(10,60,'1994-01-03 08:34:54',3,14.72115,1,23869,2),(11,42,'1995-05-14 01:39:33',9,21607.00000,5,5321,3),(12,61,'2011-01-31 10:54:52',5,0.00001,4,9158,2),(13,84,'1985-03-02 02:12:23',7,63919193.69000,4,32547,3),(14,88,'1972-11-12 21:09:37',1,36957.29981,2,22256,2),(15,83,'2004-01-15 15:51:11',2,50970596.07532,2,22031,2),(16,35,'1992-09-27 10:47:48',3,37.66787,9,7063,3),(17,33,'1972-09-02 15:03:21',1,62455.31940,7,22696,3),(18,74,'1988-02-11 22:56:22',10,723300.26895,4,14087,1),(19,63,'2007-12-12 17:34:11',7,15549020.83620,2,2077,2),(20,26,'2017-06-02 18:31:07',3,15926919.23806,1,4072,4),(21,56,'1970-03-11 04:39:00',7,10538657.00000,7,31566,3),(22,14,'1972-07-26 12:43:41',3,217467827.73153,3,14296,5),(23,35,'2019-10-11 09:09:25',1,0.44849,8,37831,3),(24,85,'2017-12-12 20:05:10',10,13684973.24303,6,30009,3),(25,17,'1995-12-06 08:16:36',8,35.00000,9,20760,4),(26,37,'1981-10-17 20:08:55',2,12173147.10000,1,17140,1),(27,93,'2020-01-26 01:43:36',5,26536391.00000,5,32427,1),(28,43,'1972-03-16 20:29:23',2,19.70440,4,20926,1),(29,57,'2005-01-06 19:10:55',9,5168884.19103,8,10794,4),(30,87,'2000-08-02 23:15:00',1,56901788.96205,2,10033,5),(31,48,'1972-08-12 14:59:05',7,0.15808,4,3693,3),(32,90,'1994-10-13 15:10:23',8,2156.18492,7,15130,5),(33,75,'1976-12-23 11:26:19',2,0.00001,8,13510,5),(34,27,'1995-08-16 09:22:01',10,2186559.84847,1,37759,5),(35,82,'2006-08-26 13:59:58',2,1054.68766,7,24898,4),(36,53,'1982-01-05 14:40:14',5,0.00001,2,35786,5),(37,55,'2009-05-22 02:58:56',5,227.07785,5,36389,2),(38,64,'1991-02-26 23:54:16',9,502395.78944,8,25936,3),(39,68,'1983-12-22 06:30:57',4,2.96300,7,5544,2),(40,37,'1994-07-07 13:10:32',3,0.00001,2,12153,2),(41,30,'1985-01-11 02:05:54',8,585000.87000,2,24033,1),(42,88,'1999-09-01 22:37:38',7,209809.52500,8,26907,4),(43,73,'1991-03-03 02:34:08',4,27.69500,6,7932,5),(44,67,'1974-06-03 17:03:56',7,2680.38389,3,25760,5),(45,58,'1975-06-21 02:58:33',5,6.93414,8,9709,5),(46,28,'1978-01-04 09:33:24',10,178.10000,5,11757,3),(47,12,'1984-08-25 22:02:35',6,26417214.96994,3,4533,5),(48,42,'2008-02-10 04:20:46',2,2504267.17001,1,7370,4),(49,93,'1998-01-14 21:21:58',9,240910438.00000,3,16327,1),(50,25,'2011-11-21 16:46:20',3,2477152.89000,2,38696,2),(51,65,'2019-07-01 11:01:18',5,12956177.49211,6,12015,1),(52,67,'2002-06-16 00:10:11',4,9777663.13419,8,27225,4),(53,46,'1993-12-04 14:21:09',1,573211.46614,9,34097,1),(54,35,'1980-11-16 01:54:41',8,4976907.00000,9,31960,4),(55,20,'1976-07-30 08:05:40',4,27.37801,1,35653,2),(56,15,'1978-11-22 11:33:24',6,5700.75000,5,31596,2),(57,59,'1973-05-12 14:07:36',8,2.90800,8,1402,4),(58,43,'1991-05-03 09:21:39',2,108370942.90000,3,8584,5),(59,11,'2006-09-11 15:57:23',1,7631.15000,7,8145,4),(60,19,'2018-12-18 11:48:12',3,9109.78617,3,4804,5),(61,53,'1999-02-13 10:58:59',10,18.20000,2,31131,3),(62,62,'1994-02-17 04:17:48',7,0.00001,2,16490,4),(63,33,'1986-02-01 23:45:25',1,2262815.09862,9,16167,5),(64,44,'1990-10-04 23:47:31',5,3689.13910,2,36845,4),(65,19,'1994-02-11 19:12:01',7,1045743.57164,2,30298,5),(66,40,'1990-03-30 22:35:39',8,19923.02950,1,35471,3),(67,60,'1999-04-13 14:31:44',4,89.16404,2,8111,2),(68,33,'1992-01-26 03:28:59',8,229103.56984,6,8242,3),(69,23,'1978-12-30 11:44:43',9,0.19000,1,9057,3),(70,96,'1983-12-01 15:29:08',1,3121739.23713,1,38802,4),(71,90,'2009-01-17 07:15:47',6,221634.06000,8,33444,4),(72,32,'2019-11-14 19:43:53',2,1.00000,3,27534,2),(73,12,'1985-07-04 18:18:30',6,19.65128,1,17243,2),(74,1,'1999-03-11 00:57:09',10,15980450.60000,9,28159,4),(75,65,'1992-02-26 10:28:21',2,0.00001,3,25112,2),(76,62,'2015-10-17 01:01:03',6,22.69910,1,22102,1),(77,19,'1985-12-01 13:43:23',2,5.71000,9,17725,3),(78,47,'2008-12-30 22:41:30',5,92536451.49600,9,17372,2),(79,88,'1971-05-12 22:28:57',7,71.47008,2,33767,1),(80,35,'1972-04-03 04:02:40',7,0.49622,9,6630,1),(81,11,'2000-10-05 11:39:35',6,46.45935,4,30867,4),(82,81,'1972-04-20 09:08:48',9,69123.97300,6,23671,5),(83,12,'1993-11-26 21:08:59',10,10673736.60000,2,29055,3),(84,48,'1998-04-18 01:18:19',10,9928703.00000,8,15543,3),(85,26,'1972-08-23 09:16:44',7,50316.80700,5,38043,3),(86,64,'1997-11-20 07:19:42',3,14716015.00000,8,7235,1),(87,77,'1992-10-27 04:35:45',5,126161774.77000,1,11895,2),(88,23,'2000-08-12 04:08:34',9,400.78359,8,34484,4),(89,45,'1998-07-18 06:01:08',8,3378.96012,6,20977,2),(90,55,'2014-11-09 23:11:57',2,53.09807,9,7437,1),(91,70,'2020-12-14 01:15:39',3,747.74400,2,4617,3),(92,44,'1984-11-29 05:32:49',1,7895.00000,6,9667,3),(93,37,'1977-10-18 02:29:53',2,6.71705,1,2455,3),(94,83,'2004-04-12 00:21:36',7,30492.56000,4,24131,2),(95,25,'1977-10-29 03:00:09',9,2319.32400,6,33496,1),(96,81,'2009-11-26 22:53:22',5,666392479.70000,5,24369,2),(97,91,'1985-09-09 23:29:54',3,42344.72586,5,23947,4),(98,15,'1974-06-18 18:08:37',5,3345.96126,8,20018,3),(99,86,'2002-03-31 01:19:54',10,7261366.45799,7,35145,2),(100,26,'1983-11-29 07:29:50',5,164953591.87623,1,4131,3);
/*!40000 ALTER TABLE `orders_stock_bid_corp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `orders_stock_bid_corp_BEFORE_INSERT` BEFORE INSERT ON `orders_stock_bid_corp` FOR EACH ROW BEGIN
DECLARE balance_ord DECIMAL(64,5);
DECLARE cost INT;
DECLARE new_user_id INT;
SET new_user_id = NEW.user_id;
SELECT `profile_indiv`.balance INTO balance_ord FROM  `profile_indiv` WHERE new_user_id = user_id;
SET cost = NEW.total;
IF balance_ord < cost THEN 
	SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Low funds on the account';
END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `orders_type`
--

DROP TABLE IF EXISTS `orders_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `orders_type` (
  `id_orders_type` int NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id_orders_type`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `orders_type`
--

LOCK TABLES `orders_type` WRITE;
/*!40000 ALTER TABLE `orders_type` DISABLE KEYS */;
INSERT INTO `orders_type` VALUES (1,'voluptas'),(2,'aut'),(3,'minima'),(4,'rerum'),(5,'sed');
/*!40000 ALTER TABLE `orders_type` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `prof_corp`
--

DROP TABLE IF EXISTS `prof_corp`;
/*!50001 DROP VIEW IF EXISTS `prof_corp`*/;
SET @saved_cs_client     = @@character_set_client;
/*!50503 SET character_set_client = utf8mb4 */;
/*!50001 CREATE VIEW `prof_corp` AS SELECT 
 1 AS `id`,
 1 AS `created_at`,
 1 AS `company_name`,
 1 AS `registration_number`,
 1 AS `account`,
 1 AS `balance`,
 1 AS `address`,
 1 AS `telephone`,
 1 AS `email`*/;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `profile_corp`
--

DROP TABLE IF EXISTS `profile_corp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `profile_corp` (
  `user_id` int unsigned NOT NULL,
  `company_name` varchar(245) NOT NULL,
  `country` varchar(145) NOT NULL,
  `registration_number` int unsigned NOT NULL,
  `date_of_registration` datetime NOT NULL,
  `address` varchar(245) NOT NULL,
  `telephone` bigint NOT NULL,
  `email` varchar(145) NOT NULL,
  `account` int unsigned NOT NULL,
  `balance` int NOT NULL,
  UNIQUE KEY `account_UNIQUE` (`account`),
  UNIQUE KEY `user_id_UNIQUE` (`user_id`),
  UNIQUE KEY `email_UNIQUE` (`email`),
  UNIQUE KEY `telephone_UNIQUE` (`telephone`),
  UNIQUE KEY `registration number_UNIQUE` (`registration_number`),
  KEY `fk_profile_corp_user1_idx` (`user_id`),
  CONSTRAINT `fk_profile_corp_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `profile_corp`
--

LOCK TABLES `profile_corp` WRITE;
/*!40000 ALTER TABLE `profile_corp` DISABLE KEYS */;
INSERT INTO `profile_corp` VALUES (8,'Sberk','Liberia',3456789,'2020-03-01 18:00:00','748 Spencer Wall Desireeville, NC 46462-1054',7537673447,'juliet76@example.org',1234568,3000000),(9,'Morgan','Mexico',4567891,'2009-11-16 18:00:00','25558 Goodwin Roads Lake Theresia, KY 11124',7283128582,'marty21@example.net',1234569,4000000),(11,'Fiord','Bouvet Island (Bouvetoya)',5678912,'2015-06-20 18:00:00','60105 Weston Shoal Mayerstad, IL 39070',6863748223,'ykoch@example.com',1234570,5000000),(3,'Onlyway','Poland',1234567,'2012-03-20 19:01:00','81 Medhurst Cape Blandaberg, NJ 67475',803698442,'rempel.madelynn@example.net',7654321,1000000),(4,'Citygroup','Dominican Republic',2345678,'2018-04-21 18:00:00','46469 Devon Meadow Apt. 082 Antonetteview, OK 34989-2250',7858524724,'tamara29@example.com',9876543,2000000);
/*!40000 ALTER TABLE `profile_corp` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `profile_indiv`
--

DROP TABLE IF EXISTS `profile_indiv`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `profile_indiv` (
  `user_id` int unsigned NOT NULL,
  `firstname` varchar(245) NOT NULL,
  `lastname` varchar(245) NOT NULL,
  `country` varchar(145) NOT NULL,
  `passport` varchar(45) NOT NULL,
  `address` varchar(245) NOT NULL,
  `date_of_birth` datetime NOT NULL,
  `telephone` bigint NOT NULL,
  `email` varchar(145) NOT NULL,
  `account` int unsigned NOT NULL,
  `balance` decimal(64,5) NOT NULL,
  UNIQUE KEY `telephone_UNIQUE` (`telephone`),
  UNIQUE KEY `email_UNIQUE` (`email`),
  UNIQUE KEY `passport_UNIQUE` (`passport`),
  UNIQUE KEY `account_UNIQUE` (`account`),
  UNIQUE KEY `user_id_UNIQUE` (`user_id`),
  KEY `fk_profile_user_idx` (`user_id`),
  CONSTRAINT `fk_profile_user` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `profile_indiv`
--

LOCK TABLES `profile_indiv` WRITE;
/*!40000 ALTER TABLE `profile_indiv` DISABLE KEYS */;
INSERT INTO `profile_indiv` VALUES (40,'Griffin','Haag','Svalbard & Jan Mayen Islands','5885176','340 Kuhic Square Apt. 450\nLake Pollyport, IN 47330-5771','1985-01-13 19:23:19',0,'juliet76@example.org',8467149,722635.00000),(21,'Conner','Hirthe','Mexico','7904349','009 Chesley Dale\nLake Raphaelleshire, MT 98992','1989-11-14 19:17:11',1,'sarai.corkery@example.net',5349644,52727715.00000),(19,'Jedidiah','Blanda','Zambia','2159099','419 VonRueden Inlet\nGertrudemouth, MI 15269','2012-08-09 20:41:39',23,'kira64@example.net',9766197,94167.00000),(66,'Celine','Daniel','Israel','6107552','23253 Maeve Viaduct Suite 558\nMaziemouth, GA 82597-6782','1994-04-04 03:16:54',27,'kessler.kavon@example.com',6075619,4135.00000),(35,'Earnest','Buckridge','Wallis and Futuna','9548398','633 Joy Motorway Suite 657\nNew Rupertton, SD 80708-6306','2017-05-27 08:46:08',29,'reanna66@example.net',5475696,6.00000),(24,'Emil','Ratke','Saint Barthelemy','7637041','77567 Streich Extension Apt. 736\nDavidville, NM 14091-8538','1982-06-26 11:08:20',38,'krystina.mclaughlin@example.org',3148802,2627817.00000),(89,'Wendy','Shields','Guadeloupe','3860586','8281 Collier River Suite 170\nRunolfssonborough, RI 89281-0702','2018-06-12 04:09:50',40,'enrique61@example.org',9517193,66604478.00000),(68,'Tyshawn','Flatley','Saint Kitts and Nevis','1784329','18855 Farrell Port\nMarquardtshire, MT 56230','1990-06-15 04:46:33',43,'theo.rutherford@example.net',2449658,884.00000),(87,'Jayson','Bins','Vietnam','1145651','78064 Schuster Orchard\nLake Marie, RI 63598','1995-05-05 14:22:05',74,'steuber.arch@example.com',9277771,569.00000),(95,'Americo','Schneider','Ethiopia','6637962','54433 John Dam\nDorotheaport, FL 18561','2014-03-10 01:12:00',120,'will.freeda@example.com',3255628,46.00000),(7,'Amie','Ritchie','Finland','3440287','827 Rau Avenue Apt. 358\nLolafurt, PA 02946-2693','1971-05-06 14:05:37',134,'greg94@example.org',9992748,4248090.00000),(29,'Shad','Monahan','Saint Helena','4404766','8876 Hoppe Meadow Suite 020\nNew Samborough, NM 78745','1996-03-23 04:32:46',210,'luigi76@example.org',6813708,6.00000),(84,'Kira','Bergstrom','Tunisia','1794251','0404 Gusikowski Terrace Suite 483\nKochfort, WY 24631-8766','1974-07-08 18:32:44',360,'rstreich@example.net',5484985,5.00000),(78,'Adan','Schulist','Oman','2122164','1934 Addison Hills Suite 258\nAbshireberg, VT 52935','1970-10-03 03:56:42',389,'terrence.parker@example.org',3480629,0.00000),(81,'Elenora','Bayer','Bahrain','3735410','3181 Queenie Via Apt. 805\nLake Linneaville, MN 58081','2011-11-16 05:13:42',570,'bailee51@example.com',2895360,33203.00000),(57,'Frederik','Boyle','Sweden','4266758','41817 Jerrell Falls Apt. 048\nSouth Shanna, ID 97235','1997-10-16 19:35:29',589,'ykoch@example.com',8631671,10.00000),(50,'Marcellus','Wiza','Netherlands Antilles','8880019','482 West Mount\nPort Kobyburgh, HI 53654','1978-01-03 14:21:19',697,'vhaley@example.org',4569566,8517.00000),(34,'Adela','Kub','Niger','8062906','534 Russel Mountains Suite 004\nSouth Elinore, OR 40613-4495','1973-07-07 00:37:03',732,'margie80@example.org',8034747,51.00000),(85,'Leonard','Rice','Angola','9621271','6721 Lebsack Prairie\nEffertzmouth, DE 36500','1988-03-23 14:42:51',762,'tremblay.malinda@example.com',6213551,4.00000),(41,'Caleb','Bashirian','Saudi Arabia','4672900','93185 Audrey Summit Apt. 982\nBeckerchester, SD 24944-8547','1971-01-27 12:00:20',933,'tamara29@example.com',4380825,7.00000),(36,'Connor','Moen','Swaziland','4127731','9213 Quitzon Point Suite 294\nPort Rosamondmouth, NC 60930','1970-09-23 13:00:12',957,'marty21@example.net',9495030,673382455.00000),(80,'Manuel','Beer','Comoros','6322936','647 Christian Garden Apt. 083\nNorth Alene, SD 34331-4049','1996-03-24 11:25:39',966,'weber.sheridan@example.com',4212171,67810373.00000),(38,'Lester','Pacocha','Poland','8592511','281 Medhurst Cape\nBlandaberg, NJ 67475','1976-03-27 19:23:11',18119,'umuller@example.net',3600132,8124741.00000),(18,'Justus','Kreiger','Netherlands','6763031','167 Corkery Ports\nOrnchester, ID 33708-3989','2016-02-04 15:30:43',143355,'sherzog@example.net',4782221,20812.00000),(65,'Sibyl','Durgan','Honduras','3089471','27738 Marvin Estates\nVickyton, ME 90989-2090','1980-03-31 14:50:40',183641,'yeffertz@example.net',3537788,2.00000),(61,'Angelica','Cronin','Moldova','5041418','4598 Liliane Roads\nSouth Noehaven, TX 03813','1989-01-27 00:18:24',347395,'bonnie84@example.com',8760991,0.00000),(67,'Brett','Breitenberg','France','4645801','97951 Swaniawski Glen\nNorth Aylinmouth, WA 55721-6113','1991-08-15 23:11:46',412050,'jerel.murazik@example.net',1663227,426081884.00000),(1,'Barbara','Harvey','Croatia','4973620','3183 West Fords\nLake Nathenland, OR 67490','2018-06-12 04:58:56',445869,'anikolaus@example.com',2367442,99.00000),(10,'Terence','Watsica','British Indian Ocean Territory (Chagos Archipelago)','2348898','4439 Ethel Forges\nValentinashire, OR 30845','1984-06-21 07:14:35',471608,'lakin.gudrun@example.net',9255160,0.00000),(54,'Jacklyn','Satterfield','Bangladesh','6487950','324 Hayes Courts Suite 063\nCarlosmouth, NM 66925','1998-03-21 05:33:21',696845,'loraine27@example.com',1912788,852572.00000),(32,'Rowan','Rippin','United States Minor Outlying Islands','3830822','86892 Marc Estate Apt. 745\nHaleyfort, OK 73246','2020-07-11 19:49:35',876702,'gmarquardt@example.com',2734962,940576013.00000),(20,'Eusebio','Marvin','Monaco','1788625','411 Joanne Drive Suite 823\nEast Lisandro, OH 97782-5767','2006-06-04 02:10:57',886307,'larue.jakubowski@example.org',5321163,72195506.00000),(94,'Kathryne','Gleichner','Cocos (Keeling) Islands','9997407','0307 Darron Islands\nEast Armandfurt, MD 88505','2018-11-08 01:34:01',906466,'felipa64@example.com',8489233,200.00000),(56,'Baron','Price','Niue','3616814','9131 Schimmel Burg Suite 994\nShanahanfort, CT 93539-3721','1998-05-05 22:58:00',960323,'roob.blaise@example.com',5356965,721.00000),(97,'Leif','Johnston','Cuba','8464354','3077 Calista Orchard\nPurdystad, TX 78827-7368','2008-07-30 04:36:30',991245,'lexi04@example.com',4628926,6.00000),(76,'Freda','Schowalter','Nepal','7957050','802 Corkery Meadow Suite 441\nGrantside, MA 15876-6442','1993-09-08 03:24:12',699359611,'rylee.morar@example.org',4699735,56858325.00000),(46,'Dortha','Balistreri','Samoa','4619051','2926 Jacobs Garden Apt. 296\nSouth Corineside, AZ 95469','2015-05-03 09:10:18',803698442,'rempel.madelynn@example.net',4043712,87632.00000),(5,'Rosamond','Kilback','Cape Verde','2828626','30465 Terrence Lights Apt. 469\nNew Eliasberg, ME 04117','1970-02-13 11:54:42',1171310841,'samantha12@example.com',2916151,98661934.00000),(14,'Hugh','Schuppe','Guinea','3375743','31010 Mariane Motorway Suite 017\nSaraiburgh, ND 30717','2009-01-07 04:33:06',2134350827,'gorczany.erling@example.com',1511982,69876.00000),(53,'Yessenia','Hammes','Jersey','3013023','632 Shakira Spur\nEast Zelda, MN 21249','1976-02-09 21:15:43',2817893887,'maxine.quitzon@example.org',3435834,157.00000),(6,'Robin','Von','Bouvet Island (Bouvetoya)','9476030','0268 Larkin Inlet Suite 415\nShanahanshire, NE 05843','2002-06-20 19:40:15',4773423375,'albertha94@example.org',1705673,132833172.00000),(2,'Marilyne','Moore','Monaco','1489773','60105 Weston Shoal\nMayerstad, IL 39070','1991-08-31 04:42:30',4773820832,'hoppe.crystel@example.com',7645912,150049301.00000),(91,'Laurine','Jacobson','Mexico','9103141','25558 Goodwin Roads\nLake Theresia, KY 11124','2020-09-05 08:17:22',6863748223,'kody.tromp@example.com',2230303,361592.00000),(25,'Easter','Mann','Liberia','3918890','91362 Pagac Square\nLake Gisselleton, RI 67936-2787','1975-02-15 18:01:43',7283128582,'schamberger.fredy@example.org',1999438,626559.00000),(13,'Golda','Cronin','Dominican Republic','7246526','748 Spencer Wall\nDesireeville, NC 46462-1054','2010-05-19 14:25:38',7537673447,'smueller@example.org',4451214,28648138.00000),(74,'Emmy','Skiles','Kiribati','2946137','46469 Devon Meadow Apt. 082\nAntonetteview, OK 34989-2250','1999-02-15 03:13:28',7858524724,'mosciski.cyril@example.com',2680990,576157433.00000),(82,'Mayra','Balistreri','Trinidad and Tobago','5127680','70814 Kshlerin Spur\nRichmondstad, CO 91543','1975-01-24 22:56:09',8158374760,'cummings.joey@example.net',3967233,0.00000);
/*!40000 ALTER TABLE `profile_indiv` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `stock_tools`
--

DROP TABLE IF EXISTS `stock_tools`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `stock_tools` (
  `id_stock_tools` int NOT NULL AUTO_INCREMENT,
  `name` varchar(245) NOT NULL,
  PRIMARY KEY (`id_stock_tools`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `stock_tools`
--

LOCK TABLES `stock_tools` WRITE;
/*!40000 ALTER TABLE `stock_tools` DISABLE KEYS */;
INSERT INTO `stock_tools` VALUES (1,'eaque'),(2,'molestiae'),(3,'dolore'),(4,'ab'),(5,'velit'),(6,'libero'),(7,'sed'),(8,'totam'),(9,'sint'),(10,'dolores');
/*!40000 ALTER TABLE `stock_tools` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user`
--

DROP TABLE IF EXISTS `user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `user` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `login` varchar(45) NOT NULL,
  `password_hash` varchar(65) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `deleted_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `login_UNIQUE` (`login`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user`
--

LOCK TABLES `user` WRITE;
/*!40000 ALTER TABLE `user` DISABLE KEYS */;
INSERT INTO `user` VALUES (1,'mortimer.walter@ortiz.com','de9f117e8b85ad313a39c5466387096c00613f8c','1982-08-27 01:06:22',NULL,NULL),(2,'alphonso77@green.com','b7546be1085bc49df3e9065b33fec7f5b8b6250a','2000-02-11 10:43:06',NULL,NULL),(3,'ladams@barton.org','7b0a0f8f533dfc726282363d44c41af49b173b58','1985-04-24 06:19:29',NULL,NULL),(4,'mills.aiyana@yahoo.com','2b9c4188f1781ceea3d53cd8a89e1a673e3bc687','1985-10-09 09:36:58',NULL,NULL),(5,'trowe@thompson.com','e7c1b789a12d84756d143d794e0734fe5e06af86','1979-09-12 09:25:01',NULL,NULL),(6,'kody.hartmann@gmail.com','6c44ea2be9ef174d14f51acc8e5aa1915c40ed2f','1982-10-22 10:05:44',NULL,NULL),(7,'mylene78@yahoo.com','843aa287c3d90ed12ed2794917bcce3924de3828','1998-04-22 00:54:07',NULL,NULL),(8,'heller.aric@considine.net','45925375d5fc20a598a3fb266d62ea1896123ea3','1997-06-21 05:21:14',NULL,NULL),(9,'bcassin@lueilwitzlindgren.biz','6b64b82f6d7e26fad57d1da3fcd89a6fed69c894','2008-12-18 03:59:24',NULL,NULL),(10,'michel81@yahoo.com','fb90344b4e71b1052045824fe094cdfef9858ac1','1994-05-05 11:43:19',NULL,NULL),(11,'marcella24@yahoo.com','26dfb9efc9747b3d8bea8cff76738c11dc8dbff1','1976-09-05 08:30:23',NULL,NULL),(12,'marcia36@hotmail.com','23ca42b4e729cffeb9995772e39d62213f485aa1','1982-08-02 10:28:12',NULL,NULL),(13,'hailie.ebert@hodkiewicz.com','017ce61cadc12b8d56ffaa2cc8706e9ca7907d4b','1978-07-08 01:23:28',NULL,NULL),(14,'fay.raymond@gmail.com','1fe606ec8b91c42925fc96cd7796bc5ec7d146a6','1980-06-07 03:25:19',NULL,NULL),(15,'ngleason@feil.com','b99ec5411e570072d15defea3d0374f71a30d259','2000-07-26 08:04:47',NULL,NULL),(16,'bode.calista@hotmail.com','e461bc5d5b1b3640e1b74fcfbbec10b59975cf98','2004-11-02 05:55:32',NULL,NULL),(17,'zwillms@jerde.com','fce7135891a5f80c6a56a1ea501b4718dc24dde5','2014-09-21 14:08:28',NULL,NULL),(18,'reynolds.adrain@herzog.com','ee96b04137072d2631a2bf5504730ac7d9f8c78d','2005-09-03 16:57:38',NULL,NULL),(19,'dickinson.willis@bode.biz','7354ccf5b5fb9eed048f32199e9c62bd35a17b1f','1982-07-01 00:48:45',NULL,NULL),(20,'shaniya.aufderhar@hotmail.com','e816e8bb086d9933bf3a87e975eae6a2b37c70bb','1985-01-06 02:57:07',NULL,NULL),(21,'wyman.judy@pagac.org','223f164089e53380f3038cb72156ec56cb852f17','2018-07-26 08:32:28',NULL,NULL),(22,'labadie.max@yahoo.com','0dbfc7882ea22d24953bf056a274b4a7c41ae54b','2016-08-24 08:38:31',NULL,NULL),(23,'deon82@schmeler.com','e4b00dff2166db60eea0cc849f11484fab88f810','1998-05-07 22:02:45',NULL,NULL),(24,'bwiegand@hotmail.com','5f923e05614938aa536749072549b783dcfbcf1a','1992-08-23 11:32:07',NULL,NULL),(25,'ayost@gmail.com','6ed995f1f3ef594abb812dc66da0157c2041f2ff','1975-01-20 09:44:03',NULL,NULL),(26,'spencer.brady@steuber.biz','c79294374d14f2dbe6194679cb8edb55e7a7eebd','1986-09-26 20:49:36',NULL,NULL),(27,'koby62@quigley.com','b51195a02c4655ef6823b46e6991d9d8d84f958f','1987-03-18 14:44:09',NULL,NULL),(28,'sabina.hammes@cronin.info','e06e973ad662df5cdba2b91314cabe0c684c2264','1995-03-14 06:12:11',NULL,NULL),(29,'ggutkowski@little.com','314ec275595d5b87911b447c53150197ac203646','1975-07-06 16:46:04',NULL,NULL),(30,'gd\'amore@wilkinson.com','1731431ca2679bb07a013173df22731c4fe562ba','2001-12-04 10:02:20',NULL,NULL),(31,'deshawn95@gmail.com','70adf9ad8da724fb3f86883b7f9bf09507095cd6','2018-01-16 11:23:33',NULL,NULL),(32,'oliver81@yahoo.com','c9f9ea7df5c8ce6015d17ead1b4e4460df5e672d','1972-08-21 14:47:38',NULL,NULL),(33,'ktreutel@gmail.com','d7d29f2de2abd3fe28907715244388a91767ad34','2008-09-02 06:00:53',NULL,NULL),(34,'arvid.cole@schimmel.com','18a2181814e0a688fde1515afbeced5188d3c22d','2007-01-22 09:30:27',NULL,NULL),(35,'moen.nico@yahoo.com','5714603b9187eb17717f48b3eb7a0bac6fa5f22e','1987-08-05 14:26:16',NULL,NULL),(36,'parker.bianka@powlowski.com','d14c65c240bce1884a2654d460ffde74be73bbe2','2012-03-23 06:36:11',NULL,NULL),(37,'freichert@schinner.net','213fbca53872ab6bad6fe9ef349a86471b6c7c15','1997-04-07 22:12:39',NULL,NULL),(38,'dmurazik@feest.com','2d0847ede287b332893633990e130e80370318ec','1987-07-28 16:58:51',NULL,NULL),(39,'cgreen@jacobson.com','72ee934b9b71aad55b031bd18def9a025f3eadfb','2006-01-25 18:02:40',NULL,NULL),(40,'gcrona@hotmail.com','6541122e83507695221cca9f5177a0f40da64910','1980-02-27 06:45:46',NULL,NULL),(41,'oleuschke@hotmail.com','449063facc657673e685cad5fc9766e7c8dc85d9','2018-11-27 13:21:41',NULL,NULL),(42,'danderson@klocko.com','e0ec7aafa3d9dac563633a52b3da48b55b8d1862','1970-03-18 03:56:21',NULL,NULL),(43,'ola67@yahoo.com','d5797a8c73394bd774cb87a3340940f5deb2dbbd','1994-10-12 23:53:37',NULL,NULL),(44,'cward@gutkowski.com','39a539a630344f3d1912ca889fb3b1a20b219740','2012-04-13 17:25:04',NULL,NULL),(45,'sgorczany@hotmail.com','8a7b8998f7d3ffaf3048d761e621bb9f77cf867d','2000-05-19 01:14:27',NULL,NULL),(46,'kaitlin.collier@yahoo.com','f2254470e2118aa3cc09dea860636433db35d2e9','1975-09-13 05:20:26',NULL,NULL),(47,'stillman@quitzon.com','c026ed5d01f2cc922c44cc200f08bba02b43129c','2014-01-20 09:36:41',NULL,NULL),(48,'reichel.cloyd@gmail.com','6c2db210c90a71a5065333493f95b352fae62aed','2001-02-15 21:36:54',NULL,NULL),(49,'dare.shannon@balistreri.org','c266181bb6fa8eb8bae1378aa803c1d998c9638c','1992-09-08 09:39:24',NULL,NULL),(50,'lesch.rey@nolan.com','527852771da66abe41eb60d59091bc9e56b8243f','1997-10-08 12:34:58',NULL,NULL),(51,'hyman09@mcdermott.com','7ad20d07de1e6f8bb25544cec5da8b25df653e91','1998-09-01 07:00:17',NULL,NULL),(52,'alanna35@gmail.com','059c41bbd1115fa3d4365e19c827ed02e87b7643','2003-02-28 03:09:56',NULL,NULL),(53,'kenneth.hauck@vonchristiansen.biz','3c526d26f54787eb4f9a6367e7c24d0dec0b498e','1995-11-15 22:35:14',NULL,NULL),(54,'ziemann.brayan@hamillortiz.com','a0c46e020831d04d94f62e2137a9e1064004e49a','1992-10-09 22:48:35',NULL,NULL),(55,'jennyfer46@gmail.com','9fd59f8e5cdcbde25e241bef895b6bd3c9e9465b','1999-08-04 01:37:23',NULL,NULL),(56,'jtoy@yahoo.com','37e02dde633680bfedc23b75cbcc1a055ecd2c55','1974-03-05 13:15:26',NULL,NULL),(57,'mckenzie.tess@hotmail.com','2d7d0f52bdc9415742d91e8ab782eb176f7bc638','1971-08-03 16:58:27',NULL,NULL),(58,'volkman.nyasia@hotmail.com','d0cdaf425fb8af6440010e846205a65cba47d101','2005-05-18 08:22:49',NULL,NULL),(59,'qmetz@hotmail.com','f17a1e0901841cb5bf5de7c6596d48af58ee3e13','1976-10-11 08:58:34',NULL,NULL),(60,'martine74@mclaughlin.com','1518af3de4c8bb53432b324dcb3de1c7ea9113a9','1999-02-18 01:12:21',NULL,NULL),(61,'wfahey@predovic.net','492ee24282edd2fe0fb23b7bcbb34b680a23f202','1998-06-05 08:23:24',NULL,NULL),(62,'fharris@yahoo.com','b0b0cf5cea273157222ca509628ae6cb66d7083e','2011-09-12 16:55:46',NULL,NULL),(63,'evangeline59@hotmail.com','c813c245c3abaa95ea5ace0b333e32e843369609','2012-02-22 21:17:05',NULL,NULL),(64,'jace.ortiz@ebert.com','b00174122c85177716509e4830b12c249b909259','2007-09-01 01:13:55',NULL,NULL),(65,'ibartoletti@gutmann.net','71f3600f17749b80bce21f6ee35f5d7c483b9ad7','2007-07-25 13:51:49',NULL,NULL),(66,'bins.shea@hermiston.org','cae57d33e822c7dba3969daef11c28908f783ac3','2002-07-12 14:49:03',NULL,NULL),(67,'velva.lindgren@schiller.com','0140dae8e654215e20cb99806a4ca2eeec623cbc','1970-04-18 18:01:26',NULL,NULL),(68,'garrison62@huels.biz','dd761e054877ee80451ff164b30a63588a35327f','1986-05-31 08:30:16',NULL,NULL),(69,'daugherty.filiberto@adamsboyer.com','682c3b6861360dd0f5fb8ea03d9793a9c3480c25','1992-07-12 15:54:02',NULL,NULL),(70,'eleanora68@gutmann.net','fc2b40839fd243d7a4987d5f300110ca5f8f7ebe','2010-09-28 05:11:56',NULL,NULL),(71,'ekuhn@ratke.com','8debb26da46d47b8d9481fe445a9a1c7cf79ae0d','1973-06-06 11:49:17',NULL,NULL),(72,'johns.noah@hotmail.com','33bd9039a122a0441a6b76165b93c3ce2e96fb38','2007-07-14 04:41:47',NULL,NULL),(73,'egaylord@grimes.com','dbea54c5ede5adfc80668d55b5213a6f348222e5','1991-10-26 02:23:22',NULL,NULL),(74,'eheidenreich@williamson.com','b60d660da31f873dd43b90491d282bb1f6441dda','1999-02-13 05:44:57',NULL,NULL),(75,'loy.abbott@yahoo.com','74d92ca4f36ee60bc1b6030c39080301a5492cce','1976-10-25 18:30:58',NULL,NULL),(76,'uhintz@klein.com','57ad9a00f1a07f3323fb8ff265d2e6b9e4cb9501','1983-01-10 20:46:57',NULL,NULL),(77,'norene27@yahoo.com','97975dd9ebd63cf94ee01e735170f91d4327aa5e','2008-06-14 01:45:55',NULL,NULL),(78,'laurianne.batz@yahoo.com','2bf439536d2c21254c7684705425f12431782daf','1988-12-05 22:11:26',NULL,NULL),(79,'corene.considine@gmail.com','8d189c757c7223a25789b544b15a752a61004f3d','1997-10-27 09:42:00',NULL,NULL),(80,'qyost@gmail.com','c0a40e0814856ddef43ce0069eabc1382a2bb444','1986-09-15 02:45:41',NULL,NULL),(81,'mrobel@walker.info','810b4c97cd6fa25834e668a95e4f3d18f72e6848','1996-03-13 05:46:23',NULL,NULL),(82,'haskell.o\'connell@hotmail.com','3f2a64260e4d89e1ad901d3c1146c2b5fad69500','2016-06-03 06:08:58',NULL,NULL),(83,'rhoda22@beckerdaniel.com','b1b512ffc9877cd491e3aa78177d9016ad67fa71','1990-06-09 16:58:43',NULL,NULL),(84,'bradley.beier@gmail.com','3c49467a6bf98be9e9745a6172c10af231dc5898','1987-05-24 16:44:31',NULL,NULL),(85,'leon.hammes@hotmail.com','750732031c5a99d4ef3eeab78ed8eb2cb52db11c','2010-01-24 15:06:56',NULL,NULL),(86,'imurray@rohan.biz','3f8e8afae296f497af1f82481d7ee4c090fa580e','1994-04-18 10:17:05',NULL,NULL),(87,'lbradtke@gmail.com','362d37d8228e86b66701156e62d6437a4dac7957','1970-12-19 09:26:56',NULL,NULL),(88,'jeanne.parisian@gmail.com','6ddeb236fc5bd07d68b6ac09fe21b62f428496db','2003-09-26 01:50:47',NULL,NULL),(89,'astehr@ruecker.com','92397da1b8b11fdfd83e2272bc581f6c8564d576','2012-07-22 09:29:55',NULL,NULL),(90,'lucious00@hermiston.biz','51e167cca54e7b1d640ed82f89ce0d74cebbfb2b','1991-06-10 09:45:47',NULL,NULL),(91,'block.vincenzo@kulas.net','0915fb59dcd11b118f039861c01294aa7a2f4022','2001-11-23 23:14:05',NULL,NULL),(92,'lela49@gmail.com','c95df2d840f7a0f43ad6e9f9a627118adf6ad6e0','2003-10-17 01:32:18',NULL,NULL),(93,'beatrice.ebert@beattyohara.com','f786cfe382320c3b8eadd9b1cc534ecff9cc8aaa','1999-09-02 20:25:57',NULL,NULL),(94,'kruecker@ernsersmitham.biz','f509ddc28f7866bb1f901547754ada7e337fece9','1987-08-11 15:53:45',NULL,NULL),(95,'saige.tromp@hotmail.com','ad1c8ab865073e7f2cda01e84e8f725b9aba15d4','2008-01-12 13:34:06',NULL,NULL),(96,'goodwin.lucienne@hotmail.com','58363b638664715161586db1cab5e69692769519','1984-02-19 06:11:01',NULL,NULL),(97,'patience.pfannerstill@streich.com','f33a0e451b7b04e2d0b7a775c0421804a8f04f53','2007-11-16 12:40:31',NULL,NULL),(98,'nedra07@kuhicledner.com','a3f82e8ca9437b66cb5409bf50fca77058420b3d','1978-06-20 04:58:30',NULL,NULL),(99,'keebler.oliver@yahoo.com','edf485c888266bba4be0ec290d8815fd8d7407b3','2019-08-05 20:18:58',NULL,NULL),(100,'torrey09@gmail.com','2f0bed9f3c87c621708e2df5d94fa51fe68aa688','2017-05-25 00:30:19',NULL,NULL);
/*!40000 ALTER TABLE `user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping events for database 'mydb'
--

--
-- Dumping routines for database 'mydb'
--
/*!50003 DROP PROCEDURE IF EXISTS `info` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `info`(IN in_user_id INT)
BEGIN
SELECT 
    u.id,
    i.firstname,
    i.lastname,
    t.`name` AS frx_tools,
    o.rate,
    o.quantity,
    o.total,
    o.volume,
    tp.`name` AS orders_type,
    i.`account`,
    i.`balance`
FROM
    `user` u
        LEFT JOIN
    orders_frx_asc o ON u.id = o.user_id
        LEFT JOIN
    profile_indiv i ON o.user_id = i.user_id
        LEFT JOIN
    frx_tools t ON o.frx_tools_id_frx_tools = t.id_frx_tools
        LEFT JOIN
    orders_type tp ON o.orders_type_id_orders_type = tp.id_orders_type
HAVING u.id = in_user_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `new_procedure` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `new_procedure`()
BEGIN
SELECT 
    u.id,
    i.firstname,
    i.lastname,
    t.`name` AS frx_tools,
    o.rate,
    o.quantity,
    o.total,
    o.volume,
    tp.`name` AS orders_type,
    i.`account`,
    i.`balance`
FROM
    `user` u
        LEFT JOIN
    orders_frx_asc o ON u.id = o.user_id
        LEFT JOIN
    profile_indiv i ON o.user_id = i.user_id
        LEFT JOIN
    frx_tools t ON o.frx_tools_id_frx_tools = t.id_frx_tools
        LEFT JOIN
    orders_type tp ON o.orders_type_id_orders_type = tp.id_orders_type
HAVING u.id = in_user_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Final view structure for view `prof_corp`
--

/*!50001 DROP VIEW IF EXISTS `prof_corp`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `prof_corp` AS select `u`.`id` AS `id`,`u`.`created_at` AS `created_at`,`pc`.`company_name` AS `company_name`,`pc`.`registration_number` AS `registration_number`,`pc`.`account` AS `account`,`pc`.`balance` AS `balance`,`pc`.`address` AS `address`,`pc`.`telephone` AS `telephone`,`pc`.`email` AS `email` from (`profile_corp` `pc` left join `user` `u` on((`pc`.`user_id` = `u`.`id`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2021-04-09 10:27:05
